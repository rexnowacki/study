/*! For license information please see default_common.js.LICENSE.txt */
(window.LearnosityAmd=window.LearnosityAmd||[]).push([[0],{129:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function classNames(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=classNames.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(classNames.default=classNames,e.exports=classNames):void 0===(r=function(){return classNames}.apply(t,[]))||(e.exports=r)}()},131:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return hasBlockElement}));var r=n(1),o=n.n(r),a=n(0),s=n.n(a),l=n(7),c=n.n(l),u=n(2),f=["h1","h2","h3","h4","h5","h6","p","pre","div","blockquote","section","article","table"],p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d=new function(){var e=/Mac|iPad|iPhone|iPod/.test(navigator.platform),t=s.a.uniqueId("lrn_capslock_listener_"),n=this,r=[];function setStatus(e){n.status!==e&&(s.a.each(r,(function(t){t(e)})),n.status=e)}this.status=!1,this.observe=function(a,l){return l&&(a=s.a.bind(a,l)),r.push(a),1===r.length&&function startListening(){var r=!1;o()(window).on("focus."+t,(function(){o()(window).one("keypress."+t,n.correctStatus)})),e?(o()(window).on("keydown."+t,(function(e){20===(e||window.event).keyCode&&setStatus(!n.status)})),o()(window).on("keyup."+t,(function(e){20===(e||window.event).keyCode&&setStatus(!1)}))):(o()(window).on("keydown."+t,(function(e){var t=e||window.event;r||20!==t.keyCode||(setStatus(!n.status),r=!0)})),o()(window).on("keyup."+t,(function(e){var t=e||window.event;r&&20===t.keyCode&&(r=!1)})))}(),a},this.unobserve=function(e){(r=s.a.without(r,e)).length||function stopListening(){o()(window).off("."+t)}()},this.correctStatus=function(t){var n=t||window.event,r=n.charCode||n.keyCode,o=n.shiftKey;r<123&&r>96?setStatus(o):!(r<91&&r>64)||e&&o||setStatus(!o)}},h=new function(){var e=s.a.uniqueId("lrn_fullscreen_listener_"),t=this,n=[],r={generic:{change:"fullscreenchange",element:"fullscreenElement"},webkit:{change:"webkitfullscreenchange",element:"webkitFullscreenElement"},ms:{change:"MSFullscreenChange",element:"msFullscreenElement"},moz:{change:"mozfullscreenchange",element:"mozFullScreenElement"}},a="ie"===c.a.browser&&11===c.a.version,l=s.a.find(r,(function(e){if("on".concat(e.change)in document.documentElement)return e}));!l&&a&&(l=r.ms);var u=!1;function setElement(){var e=document[l.element];t.element!==e&&(s.a.each(n,(function(t){t(e)})),t.element=e)}function updateElementAfterNextRender(){u||(u=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){u=!1,setElement()}))})))}this.element=null,this.observe=function(t,r){return r&&(t=s.a.bind(t,r)),l&&(n.push(t),1===n.length&&function startListening(){o()(document).on(l.change+"."+e,updateElementAfterNextRender),u||setElement()}()),t},this.unobserve=function(t){(n=s.a.without(n,t)).length||function stopListening(){o()(document).off("."+e)}()}};function isEventSupported(e){var t=document.createElement("p"),n=!1;if(t.addEventListener)t.addEventListener(e,(function(){n=!0}),!1);else{if(!t.attachEvent)return!1;t.attachEvent("on"+e,(function(){n=!0}))}return t.setAttribute("id","target"),n}function hasBlockElement(e){return s.a.some(f,(function(t){return new RegExp("<".concat(t,"[^>]*>(.*?)<\\/").concat(t,">")).test(e)}))}t.b={capsLock:d,fullScreen:h,getViewportOffset:function getViewportOffset(){var e=o()(window),t={top:e.scrollTop(),left:e.scrollLeft()};return t.right=t.left+e.width(),t.bottom=t.top+e.height(),t},getVisibleViewportDimensions:function getVisibleViewportDimensions(){var e,t=window.innerWidth,n=window.innerHeight;return s.a.contains(["firefox","opera"],c.a.browser)&&(t=(e=o()('<div style="position:fixed;right:0;bottom:0;"></div>').appendTo(o()("body"))).get(0).getBoundingClientRect().left,n=e.get(0).getBoundingClientRect().top,e.remove()),{width:t,height:n}},sidesOnScreen:function sidesOnScreen(e){var t=o()(e),n=t.offset(),r=this.getViewportOffset();return n.right=n.left+t.outerWidth(),n.bottom=n.top+t.outerHeight(),{top:r.top<n.top&&n.top<r.bottom,right:r.right>n.right&&n.right>r.left,bottom:r.bottom>n.bottom&&n.bottom>r.top,left:r.left<n.left&&n.left<r.right}},observeMutation:function observeMutation(e,t,n){t=t||{};var r,a=o()(e),l=s.a.uniqueId("lrn.mutation."),c={childList:t.childList||!1,characterData:t.characterData||!1,attributeOldValue:t.attributeOldValue||!1,charactedDataOldValue:t.charactedDataOldValue||!1,subtree:t.subtree||!1,attributes:t.attributes||!1};if(t.attributeFilter instanceof Array&&(c.attributeFilter=t.attributeFilter),p){if(!(c.childList||c.attributes||c.characterData))return console.log('NOTE: At the very least, childList, attributes, or characterData must be set to true. Otherwise, "An invalid or illegal string was specified" error is thrown.'),!1;r=new p((function(e){e.forEach(n)})),a.each((function(){try{r.observe(e,c)}catch(t){console.log(t,e,c)}}))}else a.data("lrn-mutation-ns",l),c.attributes&&(isEventSupported("DOMAttrModified")?a.on("DOMAttrModified."+l,n):"onpropertychange"in document.body&&e.attachEvent("propertychange",n)),c.childList&&(isEventSupported("DOMSubtreeModified")?a.on("DOMSubtreeModified."+l+" DOMCharacterDataModified."+l+" DOMAttributeNameChanged."+l,n):"onpropertychange"in document.body&&a.find("*").each((function(){this.attachEvent&&this.attachEvent("onpropertychange",n)})));return r},unobserveMutation:function unobserveMutation(e,t,n){if(e)e.disconnect();else{var r=o()(t),a=r.data("lrn-mutation-ns");r.removeData("lrn-mutation-ns").off("."+a),n&&!isEventSupported("DOMSubtreeModified")&&"onpropertychange"in document.body&&(t.detachEvent("onpropertychange",n),r.find("*").each((function(){this.detachEvent&&this.detachEvent("onpropertychange",n)})))}},recomputeOpacityOn:function recomputeOpacityOn(e){if(window.getComputedStyle)return window.getComputedStyle(e).opacity},updateButtonMap:function updateButtonMap(e){var t=function getButtonMap(e){return e.map((function(){var e=o()(this),t=e.offset(),n=t.left+parseInt(e.css("margin-left"),10),r=t.top+parseInt(e.css("margin-top"),10);return{top:r,right:n+e.width(),bottom:r+e.height(),left:n,el:this,links:{}}})).get()}(e);function isBetween(e,t,n){return s.a.min([t,n])<=e&&s.a.max([t,n])>=e}function closest(e,t){var n=(t.left+t.right)/2,r=(t.top+t.bottom)/2;return s.a.first(s.a.sortBy(e,(function(e){var t=(e.left+e.right)/2,o=(e.top+e.bottom)/2,a=Math.abs(t-n),s=Math.abs(o-r);return Math.sqrt(a*a+s*s)})))}function areAligned(e,t,n,r){return isBetween(n,e,t)||isBetween(r,e,t)||isBetween(e,n,r)&&isBetween(t,n,r)}return s.a.each(t,(function(e){var n,r,o,a,s=[],l=[];for(a=0;a<t.length;a++)(o=t[a])!==e&&(areAligned(e.top,e.bottom,o.top,o.bottom)&&o.left>=e.right&&s.push(o),areAligned(e.left,e.right,o.left,o.right)&&o.top>=e.bottom&&l.push(o));n=closest(s,e),r=closest(l,e),n&&(e.links.RIGHT=n,n.links.LEFT=e),r&&(e.links.DOWN=r,r.links.UP=e)})),t},toggleBackgroundClickable:function toggleBackgroundClickable(e){var t=o()("html"),n=t.map((function(){return o()(this).css("cursor")})).get();e&&!s.a.isEqual(n,["pointer"])&&(this.cachedHtmlCursorStyle=n,t.css("cursor","pointer")),!e&&this.cachedHtmlCursorStyle&&s.a.each(this.cachedHtmlCursorStyle,(function(e,n){t.eq(n).css("cursor","auto"===e?"":e)}))},isElementVisible:function isElementVisible(e){return!!e.offsetParent&&"hidden"!==getComputedStyle(e).getPropertyValue("visibility")},focusable:function focusable(e,t){var n,r,a,s=e.nodeName.toLowerCase();return"area"===s?(r=(n=e.parentNode).name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&(!!(a=o()('img[usemap="#'+r+'"]')[0])&&this.isElementVisible(a))):(/^(input|select|textarea|button|object)$/.test(s)?!e.disabled:"a"===s&&e.href||t)&&this.isElementVisible(e)},getNextTab:function getNextTab(e,t){var n,r,a,l,c,u=!1,f=!1,p=this,d=!0;return o()(document).find("*").each((function(h,y){return r=o()(y),a=r.attr("tabindex"),l=isNaN(a),n=(l||a>=0)&&p.focusable(y,!l),c=!1,s.a.isArray(t)&&s.a.each(t,(function(e){r.hasClass(e)&&(c=!0)})),!!c||(!f&&n&&(f=r),u&&n?(d=!1,f=r,!1):void(n&&y===e&&(u=!0)))})),!!f&&{nextTabElement:f,isFirstElement:d}},detectRenderEnd:function detectRenderEnd(e,t){var n=this,r={childList:!0,subtree:!0,attributes:!0};return new u.default((function(o){var a,s;function resolveSoon(){clearTimeout(a),a=setTimeout((function(){n.unobserveMutation(s,e,resolveSoon),o()}),t)}s=n.observeMutation(e,r,resolveSoon),resolveSoon()}))}}},134:function(e,t,n){"use strict";n.d(t,"g",(function(){return isEnterOrSpace})),n.d(t,"i",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return f}));var r={PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESCAPE:27,ENTER:13,TAB:9,SHIFT:16,SPACE:32,DELETE:46,ADD_EQUAL:187,FF_ADD_EQUAL:61,NUM_PAD_ADD:107,MINUS:189,FF_MINUS:173,NUM_PAD_MINUS:109,NUM_PAD_MULTIPLY:106,DIVIDE:191,NUM_PAD_DIVIDE:111,DECIMAL:190,NUM_PAD_DECIMAL:110,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,NUM_PAD_0:96,NUM_PAD_1:97,NUM_PAD_2:98,NUM_PAD_3:99,NUM_PAD_4:100,NUM_PAD_5:101,NUM_PAD_6:102,NUM_PAD_7:103,NUM_PAD_8:104,NUM_PAD_9:105};function isEnterOrSpace(e){return e===r.ENTER||e===r.SPACE}var o=function isTabKey(e){return"Tab"===e.key||e.keyCode===r.TAB},a=function isEscapeKey(e){return"Escape"===e.key||e.keyCode===r.ESCAPE},s=function isArrowLeftKey(e){return"ArrowLeft"===e.key||e.keyCode===r.LEFT},l=function isArrowRightKey(e){return"ArrowRight"===e.key||e.keyCode===r.RIGHT},c=function isArrowUpKey(e){return"ArrowUp"===e.key||e.keyCode===r.UP},u=function isArrowDownKey(e){return"ArrowDown"===e.key||e.keyCode===r.DOWN},f=function isArrowKey(e){return s(e)||l(e)||c(e)||u(e)};t.a=r},135:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(18),s=n.n(a),l=n(36),c=n(133),u={CORRECT:"correct",INCORRECT:"incorrect",VALID:"valid"},f={globalText:function globalText(e,t){return e===u.CORRECT?t.correctResponse:e===u.INCORRECT?t.incorrectResponse:""},correctText:function correctText(e,t){var n="";if(!o.a.isEmpty(e)){var r=e.length;n+=r>1?Object(c.a)(t.numberOfCorrectAnswers,{number:r}):t.oneCorrectAnswer}return n+=o.a.pluck(e,"text").join(", ")},incorrectText:function incorrectText(e,t){var n="";if(!o.a.isEmpty(e)){var r=e.length;n+=r>1?Object(c.a)(t.numberOfIncorrectAnswers,{number:r}):t.oneIncorrectAnswer}return n+=o.a.pluck(e,"text").join(", ")},suggestedResponsesText:function suggestedResponsesText(e,t,n){var r="";if(e=o.a.filter(e,(function(e){return!o.a.findWhere(t,{text:e.text})})),!o.a.isEmpty(e)){var a=e.length;r+=a>1?Object(c.a)(n.numberOfExpectedAnswers,{number:a}):n.oneExpectedAnswer}return r+=o.a.pluck(e,"text").join(", ")}};function getGlobalAccessibility(e,t){var n=e===u.CORRECT?t?Object(c.a)(t.correctResponse):"response - correct":e===u.INCORRECT?t?Object(c.a)(t.incorrectResponse):"response - incorrect":void 0;return{label:n,visible:o.a.isString(n)}}function getText(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=s.a.stripHTML(s.a.createImageDescriptions(e),!1);if(t&&!n){var a=r.match(/\\\(\S*?\\\)/g)||[];a=a.concat(r.match(/\\\[\S*?\\]/g)||[]),o.a.each(a,(function(e){var t=e.replace("\\(","").replace("\\)","").replace("\\[","").replace("\\]",""),n="";l.a.translateOrEmptyString(t,(function(e){return n=e})),r=r.replace(e,n)}))}return r}t.a={STATES:u,ariaContentFunctions:f,getGlobalAccessibility:getGlobalAccessibility,getResponseAccessibility:function getResponseAccessibility(e){var t=e.value,n=e.state,r=e.isMath,a=e.validationState,s=e.ariaLiveLabels,l=e.minSelection,f=e.maxSelection,p=e.isMinSelectionWarningVisible,d=void 0!==p&&p,h=e.isMaxSelectionWarningVisible,y=void 0!==h&&h,v=e.disableSpokenmathDistractors,m=void 0!==v&&v,b=d||y,g=getGlobalAccessibility(a,s).visible||b,O=o.a.isFunction(n)?n():n,w=g&&t?getText(t,r,m):null;return{label:function(){if(g){var e=u.CORRECT,t=u.INCORRECT,n=u.VALID,r=w?"".concat(w," - "):"",o=l>1?s.minResponsesMessage:s.minResponseMessage,a=f>1?s.maxResponsesMessage:s.maxResponseMessage;return O===e?Object(c.a)(s.correct,{prefix:r}):O===t?Object(c.a)(s.incorrect,{prefix:r}):O===n?Object(c.a)(s.missed,{prefix:r}):y?Object(c.a)(a,{prefix:r,maxSelection:f}):d?Object(c.a)(o,{prefix:r,minSelection:l}):Object(c.a)(s.noResponseGiven,{prefix:r})}}(),visible:g}},getResponseState:function getResponseState(e,t){return o.a.isNull(e)&&o.a.isNull(t)?null:o.a.isString(e)&&t?u.CORRECT:o.a.isString(e)&&!t?u.INCORRECT:o.a.isNull(e)&&!t?u.VALID:void 0},getText:getText,getAriaLabelFromAllElements:function getAriaLabelFromAllElements(e){var t=document.createElement("div");return t.innerHTML=e,function stripElementContent(e){return e.map((function(e){if(e.attributes&&e.attributes.alt)return"Image with alt text: ".concat(e.attributes.alt.value);if(e.attributes&&e.attributes["aria-label"])return e.attributes["aria-label"].value;if(e.children){var t=[].slice.call(e.childNodes);return stripElementContent(t).join(" ")}return e.textContent}))}([].slice.call(t.childNodes)).join(", ")}}},137:function(e,t,n){"use strict";n.d(t,"c",(function(){return getViewportDimensions})),n.d(t,"b",(function(){return getElementDocumentBounding}));var r=n(0),o=n.n(r),a=document.documentElement;function getViewportScroll(){return{left:window.pageXOffset||a.scrollLeft,top:window.pageYOffset||a.scrollTop}}function getViewportDimensions(){var e=getViewportScroll();return{top:e.top,left:e.left,width:document.documentElement.clientWidth||document.body.clientWidth,height:document.documentElement.clientHeight||document.body.clientHeight}}function getDocumentDimensions(){var e=document.body,t=document.documentElement;return{width:Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth),height:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}}function getElementDocumentBounding(e){var t=e.getBoundingClientRect(),n=getViewportScroll();return{top:t.top+n.top,left:t.left+n.left,width:t.width,height:t.height}}t.a={relativeToElement:function relativeToElement(e,t,n){var r=o.a.extend({gap:0,viewportGap:5,centerAlign:!0},n),a=r.gap,s=getElementDocumentBounding(t),l=r.centerAlign?s.width/2:0,c=getElementDocumentBounding(e),u=r.centerAlign?c.width/2:0,f=r.viewportGap,p=getViewportDimensions(),d=getDocumentDimensions(),h=c.top+c.height+a,y=d.height-h,v=c.top-p.top<p.height+p.top-h&&y>s.height||h<s.height,m=c.left+u-l,b=h,g="bottom";return s.width>=p.width?m=0:m+s.width>p.width?m=p.width-s.width-f:m<0&&(m=f),b+s.height>p.top+p.height&&(b=c.top-s.height-a,g="top"),(b<0||v)&&(b=h,g="bottom"),{left:m,top:b,position:g}},getViewportScroll:getViewportScroll,getViewportDimensions:getViewportDimensions,getViewportCenter:function getViewportCenter(){var e=getViewportDimensions();return{x:e.left+e.width/2,y:e.top+e.height/2}},getDocumentDimensions:getDocumentDimensions,getElementDocumentBounding:getElementDocumentBounding,getPositionRelativeToParent:function getPositionRelativeToParent(e,t){var n=getElementDocumentBounding(e),r=getElementDocumentBounding(t);return{top:n.top-r.top,left:n.left-r.left}}}},138:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a={"lower-alpha":"a","upper-alpha":"A",number:1};t.a=function stemNumerationHelper(e,t){if(!e)return"";var n=a[e];return t=o.a.isNumber(t)?t:parseInt(t,10),"string"==typeof n?String.fromCharCode(n.charCodeAt(0)+t):"number"==typeof n?(n+t).toString():void 0}},140:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(130),c=n(128),u=n(21);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function renderFeatures(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.features,a=n.removeOnComplete;return o.a.isEmpty(r)?null:s.a.createElement("div",{className:t},o.a.map(r,(function(e,t){var n=!!e._last;return(s.a.createElement(f,{key:t,feature:e,isLastFeature:n,removeOnComplete:a}))})))}var f=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(EmbeddedFeature,e);var t=_createSuper(EmbeddedFeature);function EmbeddedFeature(){return _classCallCheck(this,EmbeddedFeature),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(EmbeddedFeature,[{key:"render",value:function render(){var e=this;return(s.a.createElement("div",{ref:function ref(t){return e.el=t}}))}},{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.feature,n=e.baseActions,r=e.isLastFeature,o=e.removeOnComplete;n.legacyRenderEmbeddedFeature({feature:t,isLastFeature:r,removeOnComplete:o,el:this.el})}}]),EmbeddedFeature}(s.a.Component);f=c.b(null,(function(e){return{baseActions:l.b(u.a,e)}}))(f),t.a={VerticalFeatures:function VerticalFeatures(e){return renderFeatures(e,"lrn_stimulus_features_vertical")},OverlayFeatures:function OverlayFeatures(e){return renderFeatures(e,"lrn_stimulus_features_overlay",{removeOnComplete:!0})}}},141:function(e,t,n){"use strict";var r={};function clear(e){var t=r[e];t&&(clearTimeout(t),delete r[e])}t.a={start:function start(e,t){var n=arguments,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;clear(e);var a=function repeatFn(){t(),start.apply(null,n)};r[e]=setTimeout(a,o)},clear:clear}},143:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(31),s=function filterUnfocusableElements(e){return o.a.filter(e,(function(e){return!o.a.isNull(e)&&!e.disabled&&e.offsetWidth>0&&e.offsetHeight>0}))},l={left:function left(e){if(e){e=s(e);var t=this.getFocusedElement(e).index,n=a.a.getPreviousIndex(t,e);n>=0&&e[n].focus()}},top:function top(e){e=s(e);var t=this.getFocusedElement(e).element;if(t){var n=t.getBoundingClientRect(),r=o.a.findLastIndex(e,(function(e){var t=e.getBoundingClientRect();if(t.top<n.top&&t.right===n.right&&t.left===n.left)return!0}));r>=0&&e[r].focus()}},right:function right(e){e=s(e);var t=this.getFocusedElement(e).index;if(e&&!1!==t){var n=a.a.getNextIndex(t,e);n>=0&&e[n].focus()}},bottom:function bottom(e){e=s(e);var t=this.getFocusedElement(e).element;if(t){var n=t.getBoundingClientRect(),r=o.a.findIndex(e,(function(e){var t=e.getBoundingClientRect();if(t.top>n.top&&t.right===n.right&&t.left===n.left)return!0}));r>=0&&e[r].focus()}},getFocusedElement:function getFocusedElement(e){var t=document.activeElement,n=e.indexOf(t);return n<0?{}:{element:t,index:n}}};t.a=l},145:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(129),s=n.n(a),l=n(127),c=n.n(l),u=n(128),f=n(140),p=n(154),d=n(7),h=n.n(d),y=n(155);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v={XSMALL:{className:"lrn-xs",minWidth:0},SMALL:{className:"lrn-sm",minWidth:481},MEDIUM:{className:"lrn-md",minWidth:801},LARGE:{className:"lrn-lg",minWidth:1200}};function ResponsiveWidget(e){if(!e.responsive)return e.children;return c.a.createElement(y.a.Detector,{onChange:function onSizeChange(t){var n=o.a.chain(v).filter((function(e){return e.minWidth<=t.width})).pluck("className").value().join(" ");e.onChange&&e.onChange(_objectSpread(_objectSpread({},t),{},{responsiveClassName:n}))}},e.children)}var m=function applyResponsiveWidgetLayout(e){var t;e.state=o.a.extend({},e.state,{dimensions:{width:0,height:0},layoutMode:"split"}),e.render=function(){var n=e.baseClassName,r=e.state,a=e.props.base,s=a.responseId,l=a.widgetLayout,u=function getLayoutData(e,t){if("stack"===e){return{layoutClassName:"",elements:o.a.map(t,(function(e){return{type:e.type,width:"",paddingLeft:"",paddingRight:""}}))}}return{layoutClassName:"clearfix",elements:t}}(r.layoutMode,l.elements),f=u.elements,p=u.layoutClassName;return t||(t=o.a.findWhere(l.elements,{type:"interaction"})),c.a.createElement(y.a.Detector,{onChange:function onChange(n){return function onComponentResize(e,t,n){var r,o=t.width,a=e.state.layoutMode,s=(r=n.width||50,o*r/100<400?"stack":"split");s!==a&&e.setState({layoutMode:s})}(e,n,t)}},c.a.createElement("div",{id:s,className:"".concat(n," ").concat(p)},e.getInstructorStimulus(),o.a.map(f,(function(t,n){return c.a.createElement(y.a.Column,_extends({key:n},t),function getChildComponent(t){return"stimulus"===t?e.getStimulus():e.getQuestionContent()}(t.type))}))))}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function baseQuestion_extends(){return(baseQuestion_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function baseQuestion_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(BaseQuestion,e);var t=_createSuper(BaseQuestion);function BaseQuestion(e){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseQuestion),baseQuestion_defineProperty(_assertThisInitialized(n=t.call(this,e)),"state",{}),baseQuestion_defineProperty(_assertThisInitialized(n),"onSizeChange",(function(e){var t=e.responsiveClassName;n.setState({responsiveClassName:t})})),o.a.getNested(e,"base.widgetLayout.enabled")&&m(_assertThisInitialized(n)),n}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(BaseQuestion,[{key:"render",value:function render(){var e=this.baseClassName,t=this.props.responsive,n=this.props.base.responseId;return c.a.createElement(ResponsiveWidget,{responsive:t,onChange:this.onSizeChange},c.a.createElement("div",{id:n,className:e},this.getInstructorStimulus(),this.getStimulus(),this.getQuestionContent()))}},{key:"baseClassName",get:function get(){var e=this.props.base,t=e.questionType,n=e.fontSizeClass,r=e.inMaskingState;return s()({"lrn-masking":r,"lrn-ie":"ie"===h.a.browser,"lrn-ios":h.a.isIOS},n,this.state.responsiveClassName,"lrn lrn_widget lrn_qr lrn_clearfix lrn_".concat(t," ").concat(n))}},{key:"getQuestionContent",value:function getQuestionContent(){var e=this.props,t=e.base,n=e.children,r=t.stimulus,a=t.extraClassNames||{},s={responseWrapper:"lrn_response_wrapper ",response:"lrn_response lrn_clearfix "},l=o.a.getNested(t,"__legacyAttributes.extraClassNames")||{};return l.lrn_response_wrapper&&(s.responseWrapper+=l.lrn_response_wrapper),l.lrn_response&&(s.response+=l.lrn_response),s.responseWrapper+=a.responseWrapper||"",s.response+=a.response||"",c.a.createElement("div",{className:s.responseWrapper},c.a.createElement(f.a.OverlayFeatures,{features:r.legacyOverlayFeatures}),c.a.createElement("div",{className:s.response},n))}},{key:"getStimulus",value:function getStimulus(){var e=this.props.base,t=e.stimulus,n=e.stimulusReview,r=e.isReviewState,o=e.responseId,a=r&&n.visible?n:t;return c.a.createElement(p.a.Stimulus,baseQuestion_extends({},a,{responseId:o}))}},{key:"getInstructorStimulus",value:function getInstructorStimulus(){var e=this.props.base.stimulusInstructor;return(c.a.createElement(p.a.InstructorStimulus,e))}}]),BaseQuestion}(c.a.Component);b=u.b((function(e){return{base:e.base}}),null)(b);t.a=b},146:function(e,t,n){"use strict";var r=n(1),o=n.n(r),a=n(0),s=n.n(a),l=(n(54),document),c=o()("body");function unwatch(e){l.unbindLeave&&l.unbindLeave(e)}t.a={watch:function watch(e,t){c.find(e).length&&l.leave&&l.leave(e,s.a.debounce((function(){c.find(e).length||(t(),unwatch(e))}),10))},unwatch:unwatch}},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(127);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Wrapper,e);var t=_createSuper(Wrapper);function Wrapper(){return _classCallCheck(this,Wrapper),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Wrapper,[{key:"render",value:function render(){return this.props.children}}]),Wrapper}(n.n(r).a.PureComponent)},149:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(5),s=n.n(a),l=n(127),c=n.n(l),u=n(132),f=n.n(u),p=n(130),d=n(128),h=n(196),y=n(55),v=n(21),m=n(57),b=n(32),g=n(38),O=n(39),w=n(146),S=n(150),P=n(147),C=n(151),R=d.b((function(e){return{isRendered:e.base.isRendered,isRenderDeferred:e.base.isRenderDeferred}}),(function(e){return{renderMathIfRequired:p.b(v.a.renderMathIfRequired,e),renderSimpleFeatures:p.b(v.a.renderSimpleFeatures,e),notifyRenderComplete:p.b(v.a.notifyRenderComplete,e)}}))(C.a);function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=s.a.View.extend({initialize:function initialize(){var e=this;this._responseId=this.model.get("response_id"),this.activity=this.options.activity,this.remove=this.remove.bind(this),this.initialisationCompleted=this.initialisationCompleted.bind(this);var t=this.getDataService();this.addFacadeMethods(this.getFacade()),t.prepare((function(){e.setLegacyAttributes(),e.render(),e.initialisationCompleted(),w.a.watch('[id="'.concat(e._responseId,'"]'),e.remove)}))},update:function update(){var e=this.getDataService(),t=this.getStore(),n=o.a.extend({},e.getInitialState()),r=this.widgetInstance;r&&o.a.isFunction(r.reset)&&r.reset(),t.dispatch({type:"UPDATE_ALL",payload:{data:n}}),this.prepareStoreState(),this.setLegacyAttributes(),this.renderMathIfRequired()},getDataService:function getDataService(){if(!this._dataService){var e=this.DataService;this._dataService=new e(this.model,this.getFacade())}return this._dataService},getStore:function getStore(){if(!this._store){var e=this.getDataService(),t=this.getReducers(),n=this.getMiddleware();o.a.each(t,(function(e,t){var n=e.setName;n&&n(t)})),this._store=Object(p.d)(Object(p.c)(t),e.getInitialState(),Object(S.a)(p.a.apply(void 0,_toConsumableArray(n)))),this.prepareStoreState()}return this._store},getMiddleware:function getMiddleware(){var e=this;return[h.a.withExtraArgument(this.getThunkServices()),function legacyMiddleWare(t){return function(t){return function(n){return n.type===v.a.actionTypes.QUESTION_LEGACY_BEGIN_RESPONSE&&e.beginResponse(),t(n)}}}]},getThunkServices:function getThunkServices(){var e=this;return{dataService:this.getDataService().getFacade(),mathService:this.getMathService(),simpleFeatureService:{render:function renderViewSimpleFeatures(){var renderViewSimpleFeatures=e.options.services.renderViewSimpleFeatures;return renderViewSimpleFeatures(e)}}}},getReducers:function getReducers(){return{base:y.a}},render:function render(){if(this.component)try{this.el&&f.a.unmountComponentAtNode(this.el)}catch(e){}else{var e=document.createElement("div");this.$el.replaceWith(e),this.setElement(e),this.$el.attr("data-lrn-widget-container",this._responseId).attr("data-lrn-widget-type","question")}return this.renderComponent()},renderComponent:function renderComponent(){var e=this,t=this.getStore();return new Promise((function(n){f.a.render(c.a.createElement(P.a,{ref:function ref(t){return e.component=t}},c.a.createElement(d.a,{store:t},e.getViewComponent())),e.el,n)}))},getViewComponent:function getViewComponent(){var e=this,t=(this.getStore(),this.forwardRef),n=this.getRootElement,r=this.ViewComponent,o={};return!0===t&&(o.ref=function(t){return e.widgetInstance=t}),c.a.createElement(R,{getRootElement:n.bind(this)},c.a.createElement(r,o))},getRootElement:function getRootElement(){return this.el},remove:function remove(){if(!this._removed){try{var e=f.a.findDOMNode(this.component);e&&!this.$el.find(e).length&&this.$el.append(e),this.el&&(this._unmounted=f.a.unmountComponentAtNode(this.el))}catch(e){}s.a.View.prototype.remove.call(this),w.a.unwatch('[id="'.concat(this._responseId,'"]')),this._removed=!0}},renderMathIfRequired:function renderMathIfRequired(){var e=this,t=this.getStore(),n=v.a.renderMathIfRequired({success:function success(){e.onMathRendered()}});t.dispatch(n)},renderSimpleFeatures:function renderSimpleFeatures(e){return g.a.renderSimpleFeatures.call(this,this.$el,this.activity,e)},initialisationCompleted:function initialisationCompleted(){var e=this.getMathService(),t=this.options.mathRenderPromise;e.mathquillRendering()&&(t=e.renderMathquill()),t&&t.then(this.onMathRendered.bind(this)),this.imageLoader=new O.a({element:this.el}),this.imageLoader.loadImages(),this.options.initialisationCallback&&o.a.defer(this.options.initialisationCallback)},prepareStoreState:function prepareStoreState(){},getFacade:function getFacade(){if(o.a.isUndefined(this.questionFacade)){var e=new m.a(this).facade;this.questionFacade=e}return this.questionFacade},addFacadeMethods:function addFacadeMethods(e){},getMathService:function getMathService(){return o.a.isUndefined(this._mathService)&&(this._mathService=new b.a(this,"question")),this._mathService},setLegacyAttributes:function setLegacyAttributes(){var e=this.__legacyAttributes,t=v.a.setLegacyAttributes(e);this.getStore().dispatch(t)},onMathRendered:function onMathRendered(){var e=this.cacheRenderedMath.bind(this);this.getStore().dispatch(v.a.notifyMathRendered({cacheRenderedMath:e}))},cacheRenderedMath:function cacheRenderedMath(e){e&&this.getStore().dispatch(v.a.cacheRenderedMath({mathInResponse:e}))},setDisabled:function setDisabled(e){var t=this.activity.get("state"),n=this.activity.STATE,r=[n.INITIAL,n.RESUME],a=this.getStore().getState().base.disabled;return!(!o.a.contains(r,t)||a===e)&&(e?this.undelegateEvents():this.delegateEvents(),this.getStore().dispatch(v.a.setDisabled(e)),!0)},beginResponse:function beginResponse(){},pauseResponse:function pauseResponse(){},stopResponse:function stopResponse(){},forceRender:function forceRender(){return!this.isRendered()&&(this.getStore().dispatch(v.a.notifyRendered()),!0)},isRendered:function isRendered(){return this.getStore().getState().base.isRendered},masking:function masking(e,t){this.getStore().dispatch(v.a.setMaskingState(e,t))},reset:function reset(){this.getFacade().trigger("reset")}});t.a=T},150:function(e,t,n){"use strict";var r;r=function composeWithDevTools(e){return e},t.a=r},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return RenderOptimizer}));var r=n(0),o=n.n(r),a=n(127),s=n(131),l=n(165);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,l=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RenderOptimizer(e){var t=e.children,n=e.isRenderDeferred,r=e.isRendered,c=e.getRootElement,u=e.renderMathIfRequired,f=e.renderSimpleFeatures,p=e.notifyRenderComplete,d=c(),h=Object(a.useMemo)((function(){return s.b.isElementVisible(d)}),[]),y=_slicedToArray(Object(a.useState)(!!h||!n),2),v=y[0],m=y[1];return Object(a.useEffect)((function(){var e;return r||v||(e=new l.a(d,(function(t){t&&e.stop(),m(t)}))).start(),function(){return e&&e.stop()}}),[]),Object(a.useEffect)((function(){h?n&&!r&&p():n&&v&&!r&&o.a.defer((function(){u(),f(),p()}))}),[v,r]),r||!n||v?t:null}},154:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(140),s=n(127),l=n.n(s);t.a={Stimulus:function Stimulus(e){if(!e.visible)return null;var t=e.responseId;return l.a.createElement("div",{className:"lrn_question"},l.a.createElement("div",{className:"lrn_stimulus lrn_clearfix"},l.a.createElement("div",{className:"lrn_stimulus_content lrn_clearfix",dangerouslySetInnerHTML:{__html:e.content},id:"stimulus-".concat(t)}),function renderLegacyVerticalFeatures(){var t=e.legacyVerticalFeatures,n=e.legacyEvents,r=e.i18n;if(!o.a.isEmpty(t))return l.a.createElement(a.a.VerticalFeatures,{features:t,i18n:r,events:n})}()))},InstructorStimulus:function InstructorStimulus(e){return e.visible?l.a.createElement("div",{className:"lrn_question"},l.a.createElement("div",{className:"lrn-instructor-stimulus"},l.a.createElement("div",{className:"lrn_clearfix"},l.a.createElement("div",{className:"lrn-instructor-stimulus-content",dangerouslySetInnerHTML:{__html:e.content}})))):null}}},155:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(40),s=n.n(a),l=n(127),c=n.n(l),u=n(132),f=n.n(u),p=n(24);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Detector,e);var t=_createSuper(Detector);function Detector(e){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Detector),function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(_assertThisInitialized(n=t.call(this,e)),"onWrapperSizeChange",o.a.debounce((function(){var e=_assertThisInitialized(n),t=e.onChange,r=e.el;t&&r&&!n._unmounted&&t({width:r.offsetWidth,height:r.offsetHeight})}),400)),o.a.isFunction(e.onChange)&&(n.onChange=e.onChange),n}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Detector,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.el=f.a.findDOMNode(this),this.resizeSensor=Object(p.a)(this.el,(function(){return new s.a(e.el,e.onWrapperSizeChange)})),this.onWrapperSizeChange()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0,this.resizeSensor.detach(this.onWrapperSizeChange),this.el=null}},{key:"render",value:function render(){var e=this.props.children;return c.a.Children.only(e)}}]),Detector}(c.a.PureComponent);t.a={Detector:d,Column:function Column(e){var t=function(e){var t=function formatValue(e){return e?"".concat(e,"%"):""},n=e.width,r=e.paddingLeft,o=e.paddingRight;return{width:t(n),paddingLeft:t(r),paddingRight:t(o),float:n?"left":""}}(e);return(c.a.createElement("div",{style:t},e.children))}}},157:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(175);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function ShuffleService(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,ShuffleService),this.model=e,this.options=n,e.ready?this.initialize(e,n):e.once(e.EVENT.READY,(function(){t.initialize(e,n)}))}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(ShuffleService,[{key:"initialize",value:function initialize(e,t){var n=this;if(delete this.optionOrder,delete this._canShuffleOnDemand,this._getQuestion().shuffle_options){var r=t.key,a=t.shuffleOptions,s=t.mapValueRequired;if(o.a.isUndefined(r))return void(this._canShuffleOnDemand=!0);e.get("isDynamicContent")&&e.on("dynamicContent:changed",(function(){n._setShuffledOrder(r,a)})),this._setShuffledOrder(r,a),s&&this._attachShuffledOptionsMapHandler()}}},{key:"reInitialize",value:function reInitialize(){this.initialize(this.model,this.options)}},{key:"get",value:function get(e){return e=e||this.options.key,this.optionOrder?this._reOrderOptions(e,this.optionOrder):o.a.clone(o.a.getNested(this._getQuestion(),e))}},{key:"getDynamicSeed",value:function getDynamicSeed(){var e=this.model,t=e.get("response_id");return e.get("isDynamicContent")?"".concat(t,"_dynamic_").concat(e.get("dynamicContentRowId")):t}},{key:"getOrderedData",value:function getOrderedData(e,t){return this._canShuffleOnDemand&&!o.a.isEmpty(e)?this._shuffleArrayOnDemand(e,t):e}},{key:"mapShuffledOptionsValue",value:function mapShuffledOptionsValue(e,t){return o.a.isArray(e)&&o.a.isArray(t)&&t.length===e.length?o.a.map(t,(function(n,r){var o=e.indexOf(r);return t[o]})):t}},{key:"mapValueBasedOnOptionOrder",value:function mapValueBasedOnOptionOrder(e){var t=this.optionOrder;if(o.a.isArray(t)&&o.a.isArray(e)){var n=e&&e.length,r=t&&t.length;if(n<r)for(var a=0;a<r-n;a++)e.push(void 0);else e.slice(0,r);return o.a.map(t,(function(t){return e[t]}))}return e}},{key:"_getQuestion",value:function _getQuestion(){return this.model.get("question")}},{key:"_attachShuffledOptionsMapHandler",value:function _attachShuffledOptionsMapHandler(){var e=this,t=this.question,n=this.options,r=this.model,a=n.key,s=n.mapShuffledOptionsValue||this.mapShuffledOptionsValue,l=o.a.getNested(t,a),c="review"===o.a.getNested(r,"activityOptions.state");r.updateResponseValue=o.a.wrap(r.updateResponseValue,(function(t,n,o){c||(n=s(e.optionOrder,n,l)),t.call(r,n,o)})),r.getResponseValue=o.a.wrap(r.getResponseValue,(function(t){return e.mapValueBasedOnOptionOrder(t.call(r))})),r.mapValidationMetadataToResponseState=o.a.wrap(r.mapValidationMetadataToResponseState,(function(t,n){return n.metadata=e.mapValueBasedOnOptionOrder(n.metadata),t.call(r,n)}));var u=r.getScorer();u&&(u.suggestedResponse=o.a.wrap(u.suggestedResponse,(function(t){var n=t.call(u);return n&&n.value?o.a.extend({},n,{value:e.mapValueBasedOnOptionOrder(n.value)}):n})),u.validateIndividualResponses=o.a.wrap(u.validateIndividualResponses,(function(t){return e.mapValueBasedOnOptionOrder(t.call(u))})))}},{key:"_setShuffledOrder",value:function _setShuffledOrder(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model;n.hasResponse()&&n.get("response").order?this.optionOrder=this.get("response").order:this.optionOrder=this._getShuffleOrder(this._getOptionsToShuffle(e),t)}},{key:"_shuffleArrayOnDemand",value:function _shuffleArrayOnDemand(e,t){var n=this._getShuffleOrder(e,{index:t}),r=o.a.clone(e);return o.a.map(n,(function(e){return r[e]}))}},{key:"_getShuffleOrder",value:function _getShuffleOrder(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.a.range(e.length),r=o.a.isNumber(t.index)?t.index:"";return Object(a.a)({exclusions:t.exclude,questionMetadata:this.model.getMetadata(),originalOrder:n,seed:this.getDynamicSeed()+r})}},{key:"_getOptionsToShuffle",value:function _getOptionsToShuffle(e){return o.a.getNested(this._getQuestion(),e)}},{key:"_reOrderOptions",value:function _reOrderOptions(e,t){var n=this;return o.a.map(t,(function(t){return n._getOptionsToShuffle(e)[t]}))}}]),ShuffleService}();t.a=s},159:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(143),c=n(137),u=n(141),f=n(134),p=n(133);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=f.a.UP,h=f.a.DOWN,y=f.a.ESCAPE,v=f.a.TAB,m=f.a.SHIFT;function getLabelContent(e,t){var n=e;return o.a.isFunction(e)&&(n=e(t)),o.a.isString(n)?n:""}function Button(e){var t=e.title,n=e.icon,r=e.label,a=e.value,l=e.index,c=e.selectedIndex,u=e.selectOption,f=e.onKeyDown,p=e.cacheButton,d=c===l?"lrn_selected":"",h=getLabelContent(r,a);return s.a.createElement("button",{title:t,"aria-label":t,className:"lrn_btn lrn_dropdown_option ".concat(d),type:"button",unselectable:"on",tabIndex:"0",onClick:function onClick(){return u(l)},onKeyDown:f,ref:function ref(e){return p&&p(e)}},function getIcon(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.a.isString(e.className)?e.className:"",n=o.a.isString(e.content)?e.content:"";return t||n?s.a.createElement("span",{className:"lrn_icon ".concat(t),dangerouslySetInnerHTML:{__html:n}}):null}(n),s.a.createElement("span",{className:"lrn_content",dangerouslySetInnerHTML:{__html:h}}))}function ScrollingIndicator(e){var t=e.scrollStart,n=e.scrollEnd;return(s.a.createElement("div",{className:"lrn_scrolling_indicator",onMouseEnter:t,onMouseLeave:n},s.a.createElement("span",{className:"lrn_caret"})))}function Viewport(e){var t=e.children,n=e.setEl,r=e.setContentEl,o=e.viewportStyle,a=(void 0===o?{}:o).height;return s.a.createElement("div",{className:"lrn_viewport",style:{height:a},ref:n},s.a.createElement("div",{className:"lrn_viewport_content",ref:r},t))}var b=function(e){_inherits(DropdownMenu,e);var t=_createSuper(DropdownMenu);function DropdownMenu(e){var n;return _classCallCheck(this,DropdownMenu),_defineProperty(_assertThisInitialized(n=t.call(this,e)),"MIN_VIEWPORT_SIZE",150),_defineProperty(_assertThisInitialized(n),"VIEWPORT_GAP",50),_defineProperty(_assertThisInitialized(n),"buttons",[]),_defineProperty(_assertThisInitialized(n),"state",{viewport:null,scrollTop:0}),_defineProperty(_assertThisInitialized(n),"focusIndex",0),_defineProperty(_assertThisInitialized(n),"cacheButton",(function(e){e&&n.buttons.push(e)})),_defineProperty(_assertThisInitialized(n),"requestToClose",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.props,r=t.onRequestClose,o=t.isTabbable,a=t.timeOfLastToggle,s=Date.now()-a;s<200||(u.a.clear("custom_dropdown"),n._removeAllEvents(),r&&r(e),o&&(n.focusIndex=0))})),_defineProperty(_assertThisInitialized(n),"selectOption",(function(e){var t=n.props,r=t.onChange,o=t.isTabbable;r&&r(e),o&&(n.focusIndex=0)})),_defineProperty(_assertThisInitialized(n),"_onKeyDown",(function(e){var t=_assertThisInitialized(n).buttons,r=n.props,a=r.menuOptions,s=r.isTabbable,c=e.keyCode;if(function isSupportedKey(e){return o.a.contains([d,h,y,v,m],e)}(c))if(s){if(e.shiftKey&&c===m)return;c!==v||e.shiftKey?c===v&&e.shiftKey&&n.focusIndex--:n.focusIndex++,c===v&&n.focusIndex===a.length&&n.requestToClose(!0)}else e.preventDefault(),c===y?n.requestToClose(!0):c===d?l.a.top(t):c===h&&l.a.bottom(t)})),_defineProperty(_assertThisInitialized(n),"_scrollStart",(function(){var e=_assertThisInitialized(n),t=e.viewportEl,r=e.viewportContentEl;u.a.start("custom_dropdown",(function(){var e=t.scrollTop+5;e<r.clientHeight-t.clientHeight&&n.setState({scrollTop:e})}))})),_defineProperty(_assertThisInitialized(n),"_scrollEnd",(function(){u.a.clear("custom_dropdown")})),n.useViewport=!!o.a.isUndefined(e.useViewport)||e.useViewport,n}return _createClass(DropdownMenu,[{key:"render",value:function render(){var e=this,t=this.props,n=t.menuOptions,r=t.selectedIndex,a=t.className,l=t.renderOption,c=this.state.viewport,u=o.a.isString(a)?a:"",f=function(){if(c)return{height:"".concat(c.height,"px")}}(),p=function getOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuOptions,n=void 0===t?[]:t,r=e.selectedIndex,o=e.selectOption,a=e.onKeyDown,l=e.cacheButton,c=e.renderOption;return n.map((function(e,t){var n=e.title,u=e.icon,f=e.label,p=e.value;if(c)return e.onClick=function(){return o(t)},e.isActive=t===r,e.onKeyDown=function(e){return a(e)},c(e);var d={key:t,title:n,icon:u,label:f,value:p,index:t,selectedIndex:r,selectOption:o,onKeyDown:a,cacheButton:l};return(s.a.createElement(Button,d))}))}({menuOptions:n,selectedIndex:r,selectOption:this.selectOption,onKeyDown:this._onKeyDown,cacheButton:this.cacheButton,renderOption:l});return s.a.createElement("div",{ref:function ref(t){return e.el=t},className:"lrn_dropdown_menu ".concat(u),role:"menu"},!this.useViewport&&p,this.useViewport&&s.a.createElement(Viewport,{setEl:function setEl(t){return e.viewportEl=t},setContentEl:function setContentEl(t){return e.viewportContentEl=t},viewportStyle:f},p),this.useViewport&&f&&s.a.createElement(ScrollingIndicator,{scrollStart:this._scrollStart,scrollEnd:this._scrollEnd}))}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(){this.buttons=[]}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._removeAllEvents()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,n=t.isOpen,r=t.focusToSelectedOption;if(n&&!this._documentEventsAdded){var o=this._getSelectedOptionElement();if(r&&o&&o.focus(),this._bindListeners(),this.useViewport){var a=this._getViewport(),s={viewport:a,scrollTop:this._getScrollTopByElement(o,a)};this.state!==s&&this.setState(s)}}else n||(this._removeAllEvents(),e.isOpen!==n&&this.setState({viewport:null,scrollTop:0}));if(n){var l=this.state.scrollTop;l>0&&(this.viewportEl.scrollTop=l)}}},{key:"_getSelectedOptionElement",value:function _getSelectedOptionElement(){var e=this.buttons,t=this.props;if(!o.a.isEmpty(e)){var n=t.selectedIndex;return e[n>=0?n:0]}}},{key:"_bindListeners",value:function _bindListeners(){document.addEventListener("click",this.requestToClose),this._documentEventsAdded=!0}},{key:"_removeAllEvents",value:function _removeAllEvents(){document.removeEventListener("click",this.requestToClose),this._documentEventsAdded=!1}},{key:"_getViewport",value:function _getViewport(){var e,t=this.el,n=this.viewportContentEl,r=t.getBoundingClientRect().top,o=n.getBoundingClientRect().height,a=this.VIEWPORT_GAP,s=this.MIN_VIEWPORT_SIZE,l=c.a.getViewportDimensions().height-r;if(l<o&&(e=l<s?s:l),e)return{top:r,height:e-=a}}},{key:"_getScrollTopByElement",value:function _getScrollTopByElement(e,t){if(!e||!t)return 0;var n=e.getBoundingClientRect(),r=n.top+n.height-t.top-t.height;return r>0?r:0}}]),DropdownMenu}(s.a.Component),g=function(e){_inherits(Dropdown,e);var t=_createSuper(Dropdown);function Dropdown(e){var n;_classCallCheck(this,Dropdown),_defineProperty(_assertThisInitialized(n=t.call(this,e)),"toggle",(function(){var e=n.state.isOpen,t=!e,r=e&&!t;n.setState({isOpen:t,focusToSelectedOption:!0,timeOfLastToggle:Date.now()}),r&&n.buttonEl.focus()})),_defineProperty(_assertThisInitialized(n),"open",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{focusToSelectedOption:!0};n.setState({isOpen:!0,focusToSelectedOption:e.focusToSelectedOption})})),_defineProperty(_assertThisInitialized(n),"close",(function(){n.setState({isOpen:!1})})),_defineProperty(_assertThisInitialized(n),"setSelectedIndex",(function(e){n.state.selectedIndex!==e?n.setState({selectedIndex:e,isOpen:!1}):n.close()})),_defineProperty(_assertThisInitialized(n),"_onDropdownRequestToClose",(function(e){n.close(),e&&n.buttonEl.focus()})),_defineProperty(_assertThisInitialized(n),"_onDropdownOptionChange",(function(e){var t=n.props,r=t.menuOptions,o=t.onChange;n.setSelectedIndex(e),n.buttonEl.focus(),o&&o({index:e,value:r[e].value})})),_defineProperty(_assertThisInitialized(n),"_onKeyDown",(function(e){var t=e.keyCode;(n.props.toggleButton||{}).disableArrowKey||(t===d||t===h?(e.preventDefault(),n.open()):t===v&&e.shiftKey&&n._onDropdownRequestToClose())})),_defineProperty(_assertThisInitialized(n),"_onBlur",(function(){var e=n.props.onBlur;o.a.isFunction(e)&&!n.isOpen()&&n.buttonEl!==document.activeElement&&e()}));var r=e.selectedIndex,a=e.scaleToFit,s=e.isDisabled,l=e.useViewport;return n.useViewport=!!o.a.isUndefined(l)||l,n.state={scaleToFit:a,selectedIndex:o.a.isNumber(r)?r:-1,isOpen:!1,isDisabled:s,labelStyle:null,timeOfLastToggle:0},n}return _createClass(Dropdown,[{key:"componentDidMount",value:function componentDidMount(){this.state.scaleToFit&&this._updateSelectedLabel()}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){var n=this.props,r=n.updateComplete,a=n.renderMain,s=this.state,l=s.selectedIndex,c=s.scaleToFit;t.selectedIndex!==l?(o.a.isFunction(r)&&r(),o.a.isFunction(a)&&a(l),c&&this._updateSelectedLabel()):l!==this.props.selectedIndex&&o.a.isNumber(this.props.selectedIndex)&&this.setState({selectedIndex:this.props.selectedIndex})}},{key:"render",value:function render(){var e=this,t=this.state,n=t.selectedIndex,r=t.isOpen,a=t.isDisabled,l=t.focusToSelectedOption,c=t.timeOfLastToggle,u=this.props,f=u.ariaDescription,d=u.ariaSelected,h=u.menuOptions,y=u.popupClassName,v=u.containerClass,m=u.renderMain,g=u.renderOption,O=u.title,w=u.isTabbable,S=this._getSelectedOption().title||O,P=Object(p.a)(d,{title:S}),C=o.a.isFunction(m)?m(this.state.selectedIndex):this._getMainButtonContent(),R=["lrn_btn","lrn_dropdown_toggle",a?"lrn_disabled":""].join(" "),T=["lrn_dropdown",v||"",r?"lrn_open":""].join(" ");return s.a.createElement("div",{className:T},s.a.createElement("button",{"aria-label":P,title:O,"aria-roledescription":f,className:R,type:"button",onClick:a?void 0:this.toggle,onKeyDown:a?void 0:this._onKeyDown,onBlur:a?void 0:this._onBlur,ref:function ref(t){return e.buttonEl=t}},C,s.a.createElement("span",{className:"lrn_caret lrn_caret_right"})),s.a.createElement(b,{menuOptions:h,className:y,selectedIndex:n,isOpen:r,timeOfLastToggle:c,isTabbable:w,focusToSelectedOption:l,useViewport:this.useViewport,onChange:this._onDropdownOptionChange,onRequestClose:this._onDropdownRequestToClose,renderOption:g}))}},{key:"isOpen",value:function isOpen(){return this.state.isOpen}},{key:"_getMainButtonContent",value:function _getMainButtonContent(){var e=this,t=this.state.labelStyle,n=this._getSelectedOption(),r=n.label,o=n.value;return s.a.createElement("span",{ref:function ref(t){return e.buttonLabelEl=t},className:"lrn_content",style:t,dangerouslySetInnerHTML:{__html:getLabelContent(r,o)}})}},{key:"_getSelectedOption",value:function _getSelectedOption(){var e=this.state.selectedIndex,t=this.props.menuOptions;return t&&t.length>e&&e>=0?t[e]:{title:"",label:""}}},{key:"_updateSelectedLabel",value:function _updateSelectedLabel(){var e=this.buttonEl,t=this.buttonLabelEl;if(e&&t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=r.height-n.height,a=null;if(o>0){var s=1-o/r.height;a={transform:"scale(".concat(s,")"),transformOrigin:"left top"}}a!==this.state.labelStyle&&this.setState({labelStyle:a})}}}]),Dropdown}(s.a.Component)},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return defineGetters}));var r=n(0),o=n.n(r);function defineGetters(e,t){o.a.each(t,(function(t,n){t=t.bind(e),Object.defineProperty(e,n,{get:t})}))}},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return getTabbableDescendants}));var r=n(0),o=n(131);function isFocusable(e){var t=e.nodeName.toLowerCase(),n=!e.disabled,a=Object(r.contains)(["a","button","input","select","textarea","object"],t)&&n,s=e.getAttribute("tabindex"),l=Object(r.isNumber)(s)&&s>=0;return o.b.isElementVisible(e)&&(a||l)}function getTabbableDescendants(e){return[].slice.call(e.querySelectorAll("*"),0).filter(isFocusable)}},171:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(130),c=n(128),u=n(135),f=n(23);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AriaLiveRegion,e);var t=_createSuper(AriaLiveRegion);function AriaLiveRegion(e){var n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AriaLiveRegion),function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(_assertThisInitialized(n=t.call(this,e)),"reset",(function(){n.props.validatableActions.clearValidationAriaLive(),document.removeEventListener("focusin",n.reset),n._focusEventAdded=!1}));var r=e.contentFunctions;return n.contentFunctions=o.a.extend({},u.a.ariaContentFunctions,r),n}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(AriaLiveRegion,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){this.shouldBeVisible(e)&&!this._focusEventAdded&&(document.addEventListener("focusin",this.reset),this._focusEventAdded=!0)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._focusEventAdded=!1,document.removeEventListener("focusin",this.reset)}},{key:"render",value:function render(){var e=this.shouldBeVisible(this.props);return(s.a.createElement("div",{className:"lrn-accessibility-arialive","aria-live":"assertive","aria-atomic":"true"},e&&this.buildContent()))}},{key:"shouldBeVisible",value:function shouldBeVisible(e){var t=e.base,n=e.validatable,r=t.isReviewState,o=n.ariaLive;return!r&&o.visible}},{key:"buildContent",value:function buildContent(){var e=this.props.validatable,t=this.props.base.i18n.labels.ariaLiveText,n=e.ariaLive,r=this.contentFunctions,o=r.globalText,a=r.correctText,s=r.incorrectText,l=r.suggestedResponsesText,c=[],u=function appendText(e){e&&c.push(e)};return u(o(e.validationState,t)),n.message?u(n.message):(u(a(n.correct,t)),u(s(n.incorrect,t)),u(t.selected),u(l(n.suggestedResponses,n.correct,t))),c.join(". ")}}]),AriaLiveRegion}(s.a.Component);p=c.b((function(e){return{base:e.base,validatable:e.validatable}}),(function(e){return{validatableActions:{clearValidationAriaLive:l.b(f.a.clearValidationAriaLive,e)}}}))(p),t.a={AriaLiveRegion:p,ScreenReaderAriaText:function ScreenReaderAriaText(e){var t=e.data;return t.visible?s.a.createElement("span",{className:"lrn-accessibility-label"},t.label):null},GlobalValidationLabel:function GlobalValidationLabel(e){var t=e.label;return(s.a.createElement("div",{className:"sr-only"},t))}}},174:function(e,t,n){"use strict";var r={FEATURE_NOTIFY_RENDERED:"feature:notifyRendered",FEATURE_SET_DISABLED:"feature:toggleDisabled",FEATURE_TOGGLE:"feature:toggle",FEATURE_RENDER_MATH_IF_REQUIRED:"feature:renderMathIfRequired"};function notifyRendered(){return{type:r.FEATURE_NOTIFY_RENDERED}}function triggerEvent(e,t){return function(n,r,o){o.dataService.triggerFeatureFacadeEvent(e,t)}}t.a={actionTypes:r,notifyRendered:notifyRendered,notifyRenderComplete:function notifyRenderComplete(){return function(e,t,n){t().base.isRendered||(e(notifyRendered()),e(triggerEvent("render")))}},setDisabled:function setDisabled(e){return{type:r.FEATURE_SET_DISABLED,payload:{disabled:e}}},toggle:function toggle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.activeElement;return{type:r.FEATURE_TOGGLE,payload:{visible:e,triggeringElement:t}}},renderMathIfRequired:function renderMathIfRequired(e){return function(t,n,o){o.mathService.renderIfRequired(e),t({type:r.FEATURE_RENDER_MATH_IF_REQUIRED})}},renderSimpleFeatures:function renderSimpleFeatures(){return function(e,t,n){n.simpleFeatureService.render()}},triggerEvent:triggerEvent}},175:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(176),s=n.n(a),l=n(17),c=function ShuffledArray(e,t){this.unshuffled=e,this.seed=t||ShuffledArray.generateSeed(),this.value=ShuffledArray.shuffle(this.unshuffled,this.seed)};c.create=function(e,t){return new c(e,t)},c.generateSeed=function(){return l.a.v4()},c.shuffle=function(e,t){var n,r,o,a,l;for(c.validate(e,t),n=e.slice(0),r=e.length,l=new s.a(t);r;)a=Math.floor(l()*r),o=n[r-=1],n[r]=n[a],n[a]=o;return n},c.validate=function(e,t){if(!o.a.isArray(e))throw new Error("ShuffledArray: must have an array as a first argument, but was: "+JSON.stringify(e));if(!o.a.isString(t))throw new Error("ShuffledArray: seed must be a string, but was: "+JSON.stringify(t));if(!t.length)throw new Error("ShuffledArray: seed must have a length, but was: "+JSON.stringify(t))};var u=c;function shuffleOrder(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exclusions||[],n=u.shuffle(e.originalOrder,e.seed),r=o.a.range(20).map((function(e){return e.toString()})),a=n,s=e.seed,l=1,c=0;l<=20&&orderIsAnExclusion(a,t);)s+=r[c],a=u.shuffle(e.originalOrder,s),l++,c++;return orderIsAnExclusion(a,t)&&(a=n),a}function orderIsAnExclusion(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.a.any(t,(function(t){return o.a.isEqual(e,t)}))}t.a=function shuffleOrderWithQuestionSeed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exclusions,n=e.questionMetadata,r=void 0===n?{}:n,o=e.originalOrder,a=r.response_shuffle_seed||e.seed;return shuffleOrder({exclusions:t,originalOrder:o,seed:a})}},176:function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e){var t=window,n=Math.pow(256,6),r=Math.pow(2,52),o=2*r;function ARC4(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<256;)s[o]=o++;for(o=0;o<256;o++)s[o]=s[a=255&a+e[o%n]+(t=s[o])],s[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,s=r.S;e--;)t=s[o=255&o+1],n=256*n+s[255&(s[o]=s[a=255&a+t])+(s[a]=t)];return r.i=o,r.j=a,n})(256)}function copy(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function mixkey(e,t){for(var n,r=e+"",o=0;o<r.length;)t[255&o]=255&(n^=19*t[255&o])+r.charCodeAt(o++);return tostring(t)}function tostring(e){return String.fromCharCode.apply(0,e)}return mixkey(Math.random(),e),function seedrandom(a,s,l){var c,u,f,p=[];return c=mixkey(function flatten(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(flatten(e[n],t-1))}catch(e){}return r.length?r:"string"==o?e:e+"\0"}((s=1==s?{entropy:!0}:s||{}).entropy?[a,tostring(e)]:null==a?function autoseed(){var n,r,o;try{return n=new Uint8Array(256),(t.crypto||t.msCrypto).getRandomValues(n),tostring(n)}catch(n){return r=t.navigator,o=r&&r.plugins,[+new Date,t,o,t.screen,tostring(e)]}}():a,3),p),u=new ARC4(p),(f=function(){for(var e=u.g(6),t=n,a=0;e<r;)e=256*(e+a),t*=256,a=u.g(1);for(;e>=o;)e/=2,t/=2,a>>>=1;return(e+a)/t}).int32=function(){return 0|u.g(4)},f.quick=function(){return u.g(4)/4294967296},f.double=f,mixkey(tostring(u.S),e),(s.pass||l||function(e,t,n,r){if(!r)return e;r.S&&copy(r,u),e.state=function(){return copy(u,{})}})(f,c,"global"in s?s.global:this==Math,s.state)}}([])}.call(t,n,t,e))||(e.exports=r)},177:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(149),s=n(23),l=n(58),c=n(14);t.a=a.a.extend({initialize:function initialize(){var e=this,t=this.model;this.listenTo(t,t.EVENT.CALLVALIDATE,(function(t){e.callValidate(t)})),a.a.prototype.initialize.apply(this,arguments)},getReducers:function getReducers(){var e=a.a.prototype.getReducers.apply(this,arguments);return o.a.extend(e,{validatable:l.a})},callValidate:function callValidate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.model.canValidateResponse()){var t=this.getDataService(),n=!(!e.showCorrectAnswer&&!e.showCorrectAnswers),r=t.canShowGlobalValidationUI,a=o.a.isBoolean(e.feedbackAttempts)?e.feedbackAttempts:!!e.feedback_attempts,l=o.a.isUndefined(e.showDistractorRationale)?t.showDistractorRationale:Object(c.g)(e.showDistractorRationale);this.getStore().dispatch(s.a.checkAnswer({canShowCorrectAnswers:n,canShowGlobalValidationUI:r,showDistractorRationale:l,shouldValidateUnattempedResponse:n,skipAttemptCountLimit:!a}))}},setLegacyAttributes:function setLegacyAttributes(){var e=this.__legacyAttributes,t=s.a.setLegacyAttributes(e);a.a.prototype.setLegacyAttributes.call(this),this.getStore().dispatch(t)}})},178:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(130),c=n(128),u=n(21),f=n(23),p=n(145),d=n(171),h=n(192),y=n(129),v=n.n(y),m=n(18),b=n.n(m),g=n(138),O=n(14),w=n(3);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function shouldBeVisible(e,t,n,r){if(o.a.isNull(n)){if("review"===r&&e!==O.e&&e!==O.d&&o.a.isEmpty(t))return!0;if(!o.a.isNull(t)&&!o.a.isEmpty(t)){var a=o.a.filter(t,(function(e){return!1===e})).length;if(e===O.e)return 0===a;if(e===O.f)return a>0}}return e===O.c||e===n}var S=function(e){_inherits(DistractorRationalePerQuestion,e);var t=_createSuper(DistractorRationalePerQuestion);function DistractorRationalePerQuestion(){return _classCallCheck(this,DistractorRationalePerQuestion),t.apply(this,arguments)}return _createClass(DistractorRationalePerQuestion,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var e=this.props,t=e.html,n=e.perQuestionlabel;return this.visible()?s.a.createElement("div",{className:"lrn_distractor_rationale_per_question",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(t)},"aria-label":n}):null}},{key:"visible",value:function visible(){var e=this.props,t=e.html,n=e.showDistractorRationalePerQuestion,r=e.validatedResponses,o=e.validationState,a=e.viewState;return t&&shouldBeVisible(n,r,o,a)}}]),DistractorRationalePerQuestion}(s.a.Component),P=function(e){_inherits(DistractorRationalePerResponseList,e);var t=_createSuper(DistractorRationalePerResponseList);function DistractorRationalePerResponseList(){return _classCallCheck(this,DistractorRationalePerResponseList),t.apply(this,arguments)}return _createClass(DistractorRationalePerResponseList,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var e=v()("lrn_distractor_rationale_list",this.props.className),t=this.props,n=t.items,r=t.title,o=t.ariaLabel,a=t.validationStemNumeration;return this.visible()?s.a.createElement("div",{className:e,"aria-label":o},s.a.createElement("div",{className:"lrn_distractor_rationale_list_title"},r),n.map((function(e){return s.a.createElement("div",{key:e.index,className:"lrn_distractor_rationale"},s.a.createElement("div",{className:"lrn_validation_stem_numeration"},Object(g.a)(a,e.index)),s.a.createElement("div",{className:"lrn_distractor_rationale_content",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(e.metadata)}}))}))):null}},{key:"visible",value:function visible(){var e=this.props,t=e.items,n=e.showDistractorRationalePerResponse,r=e.validatedResponses,o=e.validationState;return t.length&&shouldBeVisible(n,r,o)}}]),DistractorRationalePerResponseList}(s.a.Component),C=function(e){_inherits(DistractorRationale,e);var t=_createSuper(DistractorRationale);function DistractorRationale(){var e;_classCallCheck(this,DistractorRationale);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"onDistractorComponentsVisible",o.a.debounce((function(){e.props.baseActions.renderMathIfRequired()}),100)),e}return _createClass(DistractorRationale,[{key:"render",value:function render(){var e=this.props,t=e.validatable,n=e.base,r=t.questionLevelDistractorRationale,a=t.responseLevelDistractorRationale,l=t.showDistractorRationale,c=t.validationState,u=t.validatedResponses,f=t.validationStemNumeration,p=[w.QUESTION_TYPES.MCQ,w.QUESTION_TYPES.CLOZEASSOCIATION,w.QUESTION_TYPES.CLOZEDROPDOWN,w.QUESTION_TYPES.CLOZETEXT];if(!("review"===n.state||u&&o.a.contains(p,n.questionType)))return null;var d=Object(O.h)(a,O.f),h=Object(O.h)(a,O.e),y=n.i18n.labels,v=y.distractorRationale,m=y.ariaLabel;return s.a.createElement("div",{className:"lrn_distractor_rationale_wrapper",role:"region","aria-label":m.distractorRationale.distractorRationale},s.a.createElement(S,{html:r,showDistractorRationalePerQuestion:l.perQuestion,validatedResponses:u,validationState:c,viewState:n.state,perQuestionlabel:m.distractorRationale.perQuestion,onVisible:this.onDistractorComponentsVisible}),s.a.createElement(P,{className:"lrn_distractor_rationale_incorrect",items:d,showDistractorRationalePerResponse:l.perResponse,title:v.incorrectTitle,validatedResponses:u,validationState:"incorrect",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseIncorrect,onVisible:this.onDistractorComponentsVisible}),s.a.createElement(P,{className:"lrn_distractor_rationale_correct",items:h,showDistractorRationalePerResponse:l.perResponse,title:v.correctTitle,validatedResponses:u,validationState:"correct",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseCorrect,onVisible:this.onDistractorComponentsVisible}))}}]),DistractorRationale}(s.a.Component),R=n(181),T=n(135);var k={validation:function validation(e){return o.a.contains(["correct","incorrect"],e)?"lrn_".concat(e):""}};function validatable_typeof(e){return(validatable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function validatable_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function validatable_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function validatable_setPrototypeOf(e,t){return(validatable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function validatable_createSuper(e){var t=function validatable_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=validatable_getPrototypeOf(e);if(t){var o=validatable_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return validatable_possibleConstructorReturn(this,n)}}function validatable_possibleConstructorReturn(e,t){if(t&&("object"===validatable_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return validatable_assertThisInitialized(e)}function validatable_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function validatable_getPrototypeOf(e){return(validatable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function validatable_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=c.b((function(e){return{base:e.base,validatable:e.validatable}}),(function(e){return{validatableActions:l.b({checkAnswer:f.a.checkAnswer},e)}}))(h.a),M=c.b((function(e){return{base:e.base,validatable:e.validatable}}),(function(e){return{baseActions:l.b(u.a,e)}}))(C),D=c.b((function(e){return{base:e.base,validatable:e.validatable}}),(function(e){return{baseActions:l.b(u.a,e)}}))(R.b),A={responseInput:{className:"lrn_response_input"},hasSuggestedAnswersList:!1},x=function(e){!function validatable_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&validatable_setPrototypeOf(e,t)}(ValidatableQuestion,e);var t=validatable_createSuper(ValidatableQuestion);function ValidatableQuestion(){var e;validatable_classCallCheck(this,ValidatableQuestion);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return validatable_defineProperty(validatable_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"validatedEventCount",0),e}return function validatable_createClass(e,t,n){return t&&validatable_defineProperties(e.prototype,t),n&&validatable_defineProperties(e,n),e}(ValidatableQuestion,[{key:"render",value:function render(){var e=this.props,t=e.children,n=e.validatable,r=e.base.i18n.labels.ariaLiveText,o=n.validationState,a=T.a.getGlobalAccessibility(o,r);return s.a.createElement(p.a,null,s.a.createElement(d.a.AriaLiveRegion,null),s.a.createElement(d.a.GlobalValidationLabel,{label:a.label}),t,s.a.createElement(I,null),s.a.createElement(M,null))}},{key:"componentDidUpdate",value:function componentDidUpdate(){var e=this.props,t=e.baseActions,n=e.validatable,r=n.validatedEventRequestCount,a=n.validatedResponses;o.a.isEmpty(a)||r===this.validatedEventCount||t.triggerEvent("validated"),this.validatedEventCount=r}}]),ValidatableQuestion}(s.a.Component);function ResponseInput(e){var t=e.validatable.validationState,n=o.a.extend({},A,e.options),r=n.className,a=n.style,l=k.validation(t);return s.a.createElement("div",{className:"".concat(r," ").concat(l),style:a},e.children)}x=c.b((function(e){return{base:e.base,validatable:e.validatable}}),(function(e){return{baseActions:l.b(u.a,e)}}))(x);t.a={ResponseInput:ResponseInput,CheckAnswerButton:I,SuggestedAnswersList:D,DistractorRationale:M,ValidatableQuestion:x,ValidatableQuestionWithOptionalResponseInput:function ValidatableQuestionWithOptionalResponseInput(e){var t=o.a.extend({},A,e.options),n=o.a.getNested(e,"validatable.__legacyAttributes.willRenderOwnResponseInput");return s.a.createElement(x,e,s.a.createElement("div",{className:"lrn-response-validation-wrapper"},n&&e.children||s.a.createElement(ResponseInput,_extends({},e,{options:t.responseInput}),e.children)),t.hasSuggestedAnswersList&&s.a.createElement(D,null))}}},180:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(132),c=n.n(l),u=n(162);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ModalPortal,e);var t=_createSuper(ModalPortal);function ModalPortal(){return _classCallCheck(this,ModalPortal),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(ModalPortal,[{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,n=t.isOpen,r=t.afterRender;!e.isOpen&&n&&r&&r(this)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0}},{key:"render",value:function render(){var e=this.props,t=e.children,n=e.lazyRendering,r=e.isOpen;return n&&!r?null:s.a.Children.only(t)}},{key:"focus",value:function focus(){var e=this.node,t=e&&Object(u.a)(e);t&&t.length&&t[0].focus()}},{key:"node",get:function get(){return this._unmounted?null:c.a.findDOMNode(this)}}]),ModalPortal}(s.a.Component),p=n(188),d=n(137),h=n(193);function floatingModal_typeof(e){return(floatingModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function floatingModal_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function floatingModal_setPrototypeOf(e,t){return(floatingModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function floatingModal_createSuper(e){var t=function floatingModal_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=floatingModal_getPrototypeOf(e);if(t){var o=floatingModal_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return floatingModal_possibleConstructorReturn(this,n)}}function floatingModal_possibleConstructorReturn(e,t){if(t&&("object"===floatingModal_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return floatingModal_assertThisInitialized(e)}function floatingModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function floatingModal_getPrototypeOf(e){return(floatingModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getNode(e,t){var n=null;return o.a.isFunction(e)?n=e():o.a.isString(e)&&(n=document.querySelector(e)),n||t||document.body}var y=function(e){!function floatingModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&floatingModal_setPrototypeOf(e,t)}(FloatingModal,e);var t=floatingModal_createSuper(FloatingModal);function FloatingModal(e){var n;return function floatingModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FloatingModal),_defineProperty(floatingModal_assertThisInitialized(n=t.call(this,e)),"state",{fadingOut:!1}),_defineProperty(floatingModal_assertThisInitialized(n),"onDocumentKeyDown",(function(e){var t=e.keyCode;if(9===t)Object(p.a)(n.node,e);else if(27===t){var r=n.props.onRequestClose;o.a.isFunction(r)&&r()}})),_defineProperty(floatingModal_assertThisInitialized(n),"updatePortalPosition",(function(e){var t,r=floatingModal_assertThisInitialized(n),o=r.props,a=r.node,s=r.relativeNode,l=o.animation,c=o.afterRender;if(o.shouldUpdatePosition&&s){var u=a.style;u.left=0,u.top=0,t=d.a.relativeToElement(s,e.node,{centerAlign:n.props.centerAlign}),u.left="".concat(t.left,"px"),u.top="".concat(t.top,"px")}c&&c(a,e.node,t&&t.position),!0!==o.preventFocusWhenAppear&&(l&&l.enter?l.enter(a,(function(){e.focus()})):e.focus())})),n.prepareDOMNode(e),n}return function floatingModal_createClass(e,t,n){return t&&floatingModal_defineProperties(e.prototype,t),n&&floatingModal_defineProperties(e,n),e}(FloatingModal,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=this,n=this.props,r=n.isOpen,o=n.animation,a=this.parentNode,s=getNode(e.parentNode,e.defaultNode);if(this.relativeNode=getNode(e.relativeNode),s!==a&&(this.removePortal(),this.prepareDOMNode(e),this.appendPortal(e)),o&&r&&!e.isOpen){var l=o.leave;l&&(this.setState({fadingOut:!0}),l(this.node,(function(){t._unmounted||(t.setState({fadingOut:!1}),t.processEvents(e))})))}else this.node.style.display="",this.processEvents(e)}},{key:"componentDidMount",value:function componentDidMount(){this.appendPortal(this.props)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0,document.removeEventListener("keydown",this.onDocumentKeyDown),this.removePortal()}},{key:"prepareDOMNode",value:function prepareDOMNode(e){var t=e.className,n=document.createElement("div"),r=n.style;t&&(n.className=t),r.position="absolute",r.top=0,r.left=0,this.node=n}},{key:"processEvents",value:function processEvents(e){var t=e.isOpen;e.onRequestClose&&(t&&!this._documentEventsAdded?(document.addEventListener("keydown",this.onDocumentKeyDown),this._documentEventsAdded=!0):t||(document.removeEventListener("keydown",this.onDocumentKeyDown),this._documentEventsAdded=!1))}},{key:"appendPortal",value:function appendPortal(e){var t=e.parentNode,n=e.defaultNode;this.parentNode=getNode(t,n),this.parentNode.appendChild(this.node)}},{key:"removePortal",value:function removePortal(){var e=this.node;e.parentNode&&e.parentNode.removeChild(e)}},{key:"render",value:function render(){var e=this.state,t=this.props,n=this.node;return(c.a.createPortal(s.a.createElement(f,_extends({},t,{lazyRendering:!o.a.isBoolean(t.lazyRendering)||t.lazyRendering,isOpen:e.fadingOut||t.isOpen,afterRender:this.updatePortalPosition})),n))}}]),FloatingModal}(s.a.Component);_defineProperty(y,"defaultProps",{shouldUpdatePosition:!0,centerAlign:!0});t.a=Object(h.a)(y,"defaultNode")},181:function(e,t,n){"use strict";n.d(t,"a",(function(){return ResponseIndex}));var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(138);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ResponseIndex(e){var t=e.index,n=e.validationStemNumeration,r=e.domProps,o=void 0===r?{}:r;return(s.a.createElement("span",_extends({className:"lrn_responseIndex"},o),Object(l.a)(n,t)))}var c=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(SuggestedAnswersList,e);var t=_createSuper(SuggestedAnswersList);function SuggestedAnswersList(){return _classCallCheck(this,SuggestedAnswersList),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(SuggestedAnswersList,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.shouldBeVisible()&&this.props.baseActions.renderMathIfRequired()}},{key:"render",value:function render(){var e=this.props,t=e.base,n=e.customListItems,r=t.i18n.labels;if(this.shouldBeVisible()){var a=this.isSingleAnswer,l=this.buildListItems,c=a?r.correctAnswer:r.correctAnswers,u=a?"lrn_single_correct_answer":"",f=(n||l).call(this);return o.a.isEmpty(f)?null:s.a.createElement("div",{className:"lrn_correctAnswers"},s.a.createElement("span",null,c,":"),s.a.createElement("ul",{className:"lrn_correctAnswerList ".concat(u)},f))}return null}},{key:"isSingleAnswer",get:function get(){var e=this.props.validatable.suggestedResponses;return!o.a.isArray(e.value)}},{key:"buildNestedResponseItem",value:function buildNestedResponseItem(e){var t=this,n=e.value,r=e.index;return o.a.isEmpty(n)?null:s.a.createElement("li",{key:r},this.getResponseIndex(r),n.length>1&&s.a.createElement("ul",{className:"lrn_nestedCorrectAnswers"},o.a.map(n,(function(e,n){return s.a.createElement("li",{key:n},t.getResponseText(e,n))}))),1===n.length&&this.getResponseText(n[0]))}},{key:"buildListItems",value:function buildListItems(){var e=this,t=this.props.validatable.suggestedResponses;return this.isSingleAnswer?this.buildResponseItem({label:t.value},0):o.a.map(t.value,(function(t,n){if(o.a.isArray(t.value))return e.buildNestedResponseItem(t);var r=o.a.isNumber(t.index)?t.index:n;return e.buildResponseItem(t,r)}))}},{key:"buildResponseItem",value:function buildResponseItem(e,t){return s.a.createElement("li",{key:t},this.getResponseIndex(t),this.getResponseText(e))}},{key:"getResponseIndex",value:function getResponseIndex(e){var t=this.props.validatable.validationStemNumeration;return(s.a.createElement(ResponseIndex,{index:e,validationStemNumeration:t}))}},{key:"getResponseText",value:function getResponseText(e,t){return s.a.createElement("div",{key:t,className:"lrn_responseText",dangerouslySetInnerHTML:{__html:e.label}})}},{key:"shouldBeVisible",value:function shouldBeVisible(){var e=this.props.validatable,t=e.isShowingCorrectAnswers,n=e.suggestedResponses,r=e.validationState;return!(!t||"correct"===r||!n)}}]),SuggestedAnswersList}(s.a.Component);t.b=c},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return fadeIn})),n.d(t,"b",(function(){return fadeOut}));var r=n(1),o=n.n(r);function fadeIn(e,t){o()(e).hide().fadeIn({complete:t})}function fadeOut(e,t){o()(e).fadeOut({complete:t})}},187:function(e,t,n){"use strict";var r=n(1),o=n.n(r),a=n(0),s=n.n(a),l=n(127),c=n.n(l),u=n(132),f=n.n(u),p=n(180),d=n(143),h=n(134),y=n(182),v=n(31);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){_inherits(CharacterMapModal,e);var t=_createSuper(CharacterMapModal);function CharacterMapModal(){var e;_classCallCheck(this,CharacterMapModal);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"buttons",[]),_defineProperty(_assertThisInitialized(e),"requestToClose",(function(){var t=e.props.onRequestClose;t&&t()})),_defineProperty(_assertThisInitialized(e),"onDocumentKeyDown",(function(t){var n=_assertThisInitialized(e).buttons,r=t.keyCode;Object(h.c)(t)&&(t.preventDefault(),t.stopPropagation(),r===h.a.LEFT?d.a.left(n):r===h.a.UP?d.a.top(n):r===h.a.RIGHT?d.a.right(n):r===h.a.DOWN&&d.a.bottom(n))})),_defineProperty(_assertThisInitialized(e),"onCharacterButtonClick",(function(t){var n=e.props,r=n.onSelect,o=n.characters,a=t.currentTarget.dataset.characterBtnIndex;r&&r(o[a])})),e}return _createClass(CharacterMapModal,[{key:"render",value:function render(){var e=this,t=this.props,n=t.ariaLabel,r=t.title,o=t.modalIsOpen,a=t.characters,l=t.relativeNode,u=t.onRequestClose,f=t.className,d=v.a.isRtl()?"rtl":"ltr";return c.a.createElement(p.a,{isOpen:o,onRequestClose:u,relativeNode:l,className:"lrn lrn_widget lrn_charactermap_wrapper ".concat(f||""),animation:{enter:y.a,leave:y.b}},c.a.createElement("div",{className:"lrn_bubble lrn_charactermap","aria-label":n,dir:d},c.a.createElement("div",{className:"lrn_charactermap_title"},r),s.a.map(a,(function(t,n){return c.a.createElement("button",{key:n,className:"lrn_btn_grid lrn_characterbutton",type:"button",unselectable:"on",tabIndex:"0","data-character-btn-index":n,onClick:e.onCharacterButtonClick,ref:function ref(t){return e.buttons.push(t)}},t)}))))}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(){this.buttons=[]}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.removeAllEvents()}},{key:"componentDidUpdate",value:function componentDidUpdate(){var e=this.props.modalIsOpen;e&&!this._documentEventsAdded?(document.addEventListener("click",this.requestToClose),document.addEventListener("keydown",this.onDocumentKeyDown,!0),this._documentEventsAdded=!0):e||(this.removeAllEvents(),this._documentEventsAdded=!1)}},{key:"removeAllEvents",value:function removeAllEvents(){document.removeEventListener("click",this.requestToClose),document.removeEventListener("keydown",this.onDocumentKeyDown,!0)}}]),CharacterMapModal}(c.a.Component),b=function(e){_inherits(CharacterMapButton,e);var t=_createSuper(CharacterMapButton);function CharacterMapButton(e){var n;return _classCallCheck(this,CharacterMapButton),_defineProperty(_assertThisInitialized(n=t.call(this,e)),"closeModal",(function(){var e=n.props.recoverFocus;n._setModalIsOpen(!1),e?e():n.el.focus()})),_defineProperty(_assertThisInitialized(n),"onToggleButtonClicked",(function(e){var t=_assertThisInitialized(n),r=t.el,o=t.state,a=t.props;e.preventDefault(),e.stopPropagation(),n.toggleModal(),e.target===r&&o.modalIsOpen&&a.onSelect&&a.onSelect(null)})),_defineProperty(_assertThisInitialized(n),"toggleModal",(function(){var e=!n.state.modalIsOpen;n._setModalIsOpen(e)})),n.state={modalIsOpen:!1},n}return _createClass(CharacterMapButton,[{key:"render",value:function render(){var e=this,t=this.props,n=this.state,r=(this.toggleModal,this.closeModal),o=n.modalIsOpen,a=t.label,s=t.ariaLabel,l=t.title,u=t.disabled,f=t.characters,p=t.onSelect,d=t.onFocus,h=t.onBlur,y=t.modalClassName,v=t.onMouseEnter,b=t.onMouseLeave,g=o?"lrn_active":"",O=t.className||"";return c.a.createElement("button",{type:"button",className:"lrn_btn ".concat(O," ").concat(g),onFocus:d,onBlur:h,onMouseEnter:v,onMouseLeave:b,onClick:this.onToggleButtonClicked,title:l,ref:function ref(t){return e.el=t},disabled:u,tabIndex:t.tabIndex,"aria-label":s},a,c.a.createElement(m,{title:l,characters:f,relativeNode:function relativeNode(){return e.el},className:y,modalIsOpen:o,onSelect:p,onRequestClose:r}))}},{key:"_setModalIsOpen",value:function _setModalIsOpen(e){var t=this.props.onModalToggle;t&&t(e),this.setState({modalIsOpen:e})}}]),CharacterMapButton}(c.a.Component),g=function(e){_inherits(AnimatedCharacterMapButton,e);var t=_createSuper(AnimatedCharacterMapButton);function AnimatedCharacterMapButton(){var e;_classCallCheck(this,AnimatedCharacterMapButton);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"invalidateVisibilityState",s.a.debounce((function(){var t=_assertThisInitialized(e),n=t.$characterMapButtonEl,r=t._modalVisible,o=t._isCharacterMapButtonFocus,a=t.props.visible;a?n.stop().fadeIn():a||r||o||n.stop().fadeOut()}),100)),_defineProperty(_assertThisInitialized(e),"onCharacterMapButtonFocus",(function(){e._isCharacterMapButtonFocus=!0})),_defineProperty(_assertThisInitialized(e),"onCharacterMapButtonBlur",(function(){e._isCharacterMapButtonFocus=!1,e.invalidateVisibilityState()})),_defineProperty(_assertThisInitialized(e),"toggleModal",(function(t){var n=e.props.toggleModal;n&&n(t),e._modalVisible=t,e.invalidateVisibilityState()})),e}return _createClass(AnimatedCharacterMapButton,[{key:"componentDidMount",value:function componentDidMount(){this.$characterMapButtonEl=o()(f.a.findDOMNode(this.characterMapButton)),this.props.visible||this.$characterMapButtonEl.hide(),this.invalidateVisibilityState()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.invalidateVisibilityState()}},{key:"render",value:function render(){var e=this;return(c.a.createElement(b,_extends({},this.props,{ref:function ref(t){return e.characterMapButton=t},onFocus:this.onCharacterMapButtonFocus,onBlur:this.onCharacterMapButtonBlur,onModalToggle:this.toggleModal})))}}]),AnimatedCharacterMapButton}(c.a.Component);t.a={CharacterMapButton:b,AnimatedCharacterMapButton:g,CharacterMapModal:m}},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return scopeTab}));var r=n(162);function scopeTab(e,t){var n=Object(r.a)(e);if(n.length){var o=t.shiftKey,a=n[0],s=n[n.length-1],l=a===document.activeElement&&o,c=s===document.activeElement&&!o;if(l||c||e===document.activeElement)t.preventDefault(),(o?s:a).focus()}else t.preventDefault()}},191:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1),s=n.n(a),l=n(5),c=n.n(l),u=n(51);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=u.a.isPointerEventsSupported(),p=u.a.isTouchDevice(),d=!!u.a.isPassiveEventListenersSupported()&&{passive:!0},h=function(){function TouchClickObserver(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TouchClickObserver),_defineProperty(this,"ignoreClickEventsBeforeTime",0),_defineProperty(this,"initialX",-10),_defineProperty(this,"initialY",-10),_defineProperty(this,"listeners",new Set),_defineProperty(this,"touchMoveThreshold",10),_defineProperty(this,"treatTouchEndAsClick",!0),_defineProperty(this,"onClick",(function(e){0===e.button&&((0===e.clientX&&0===e.clientY||e.timeStamp>=t.ignoreClickEventsBeforeTime)&&t.dispatchEvent(e),t.ignoreClickEventsBeforeTime=0)})),_defineProperty(this,"onPointerUp",(function(e){0===e.button&&(t.ignoreClickEventsBeforeTime=e.timeStamp+100,t.dispatchEvent(e))})),_defineProperty(this,"onTouchStart",(function(e){if(1===e.touches.length){var n=e.touches[0];t.initialX=n.clientX,t.initialY=n.clientY,t.touchMoveThreshold=function getTouchMoveThreshold(){return 10/function estimateZoomFactor(){return document.documentElement.clientWidth/window.innerWidth||1}()}(),t.treatTouchEndAsClick=!0}else t.treatTouchEndAsClick=!1})),_defineProperty(this,"onTouchMove",(function(e){if(t.treatTouchEndAsClick&&1===e.touches.length){var n=e.touches[0],r=Math.abs(t.initialX-n.clientX),o=Math.abs(t.initialY-n.clientY);(r>=t.touchMoveThreshold||o>=t.touchMoveThreshold)&&(t.treatTouchEndAsClick=!1)}})),_defineProperty(this,"onTouchEnd",(function(e){0===e.touches.length&&(t.treatTouchEndAsClick&&(t.ignoreClickEventsBeforeTime=e.timeStamp+2500,t.dispatchEvent(e)),t.initialX=-10,t.initialY=-10,t.treatTouchEndAsClick=!0)})),this.eventTarget=e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(TouchClickObserver,[{key:"addListener",value:function addListener(e){0===this.listeners.size&&this.startListening(),this.listeners.add(e)}},{key:"removeListener",value:function removeListener(e){this.listeners.delete(e),0===this.listeners.size&&this.stopListening()}},{key:"removeAllListeners",value:function removeAllListeners(){this.listeners.clear(),this.stopListening()}},{key:"dispatchEvent",value:function dispatchEvent(e){var t=this;this.listeners.forEach((function(n){return n.call(t.eventTarget,e)}))}},{key:"startListening",value:function startListening(){f?this.eventTarget.addEventListener("pointerup",this.onPointerUp):p&&(this.eventTarget.addEventListener("touchstart",this.onTouchStart,d),this.eventTarget.addEventListener("touchmove",this.onTouchMove,d),this.eventTarget.addEventListener("touchend",this.onTouchEnd,d)),this.eventTarget.addEventListener("click",this.onClick)}},{key:"stopListening",value:function stopListening(){f?this.eventTarget.removeEventListener("pointerup",this.onPointerUp):p&&(this.eventTarget.removeEventListener("touchstart",this.onTouchStart),this.eventTarget.removeEventListener("touchmove",this.onTouchMove),this.eventTarget.removeEventListener("touchend",this.onTouchEnd)),this.eventTarget.removeEventListener("click",this.onClick)}}]),TouchClickObserver}();var y=o.a.extend({EVENTS:{CLICK_OR_TAP:"click:element",FOCUS_VIA_KEYBOARD:"focus:element"},documentTouchClick:new h(document),isListening:!1,startListening:function startListening(){return this.isListening||(this.isListening=!0,this.addClickOrTapEventHandler(),this.addFocusViaKeyboardEventHandler()),this},stopListening:function stopListening(){return this.isListening&&(this.isListening=!1,this.removeClickOrTapEventHandler(),this.removeFocusViaKeyboardEventHandler()),this},addClickOrTapEventHandler:function addClickOrTapEventHandler(){var e=this;this.documentTouchClick.addListener((function(t){e.trigger(e.EVENTS.CLICK_OR_TAP,t.target)}))},removeClickOrTapEventHandler:function removeClickOrTapEventHandler(){this.documentTouchClick.removeAllListeners()},addFocusViaKeyboardEventHandler:function addFocusViaKeyboardEventHandler(){var e=this;s()(document).on("keydown.lrn.domEvents",(function(t){9===t.keyCode&&o.a.defer((function(){e.trigger(e.EVENTS.FOCUS_VIA_KEYBOARD,document.activeElement)}))}))},removeFocusViaKeyboardEventHandler:function removeFocusViaKeyboardEventHandler(){s()(document).off("keydown.lrn.domEvents")}},c.a.Events);t.a=y},192:function(e,t,n){"use strict";var r=n(127),o=n.n(r);t.a=function CheckAnswerButton(e){var t=e.base,n=e.validatable,r=e.validatableActions;if(n.canCheckAnswer){var a=t.i18n,s=t.readOnly,l=t.disabled,c=n.canShowCorrectAnswers,u=n.canShowGlobalValidationUI,f=n.feedbackAttemptsCount,p=n.feedbackAttemptsLimit,d=a.labels.checkAnswer,h=!(!s&&!l)||0!==p&&f>=p;return o.a.createElement("button",{type:"button",className:"lrn_btn lrn_validate",disabled:h,onClick:function onClick(){r.checkAnswer({canShowCorrectAnswers:c,canShowGlobalValidationUI:u,skipAttemptCountLimit:!1})}},o.a.createElement("span",null,d))}return null}},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(127),o=n.n(r),a=n(131);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function withFullscreenObserver(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fullscreenElement";return(function(n){_inherits(FullScreen,n);var r=_createSuper(FullScreen);function FullScreen(){var e;_classCallCheck(this,FullScreen);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return _defineProperty(_assertThisInitialized(e=r.call.apply(r,[this].concat(n))),"state",{el:null}),_defineProperty(_assertThisInitialized(e),"onFullscreen",(function(t){return e.setState({el:t})})),e}return _createClass(FullScreen,[{key:"render",value:function render(){var n=_defineProperty({},t,this.state.el);return(o.a.createElement(e,_extends({},this.props,n)))}},{key:"componentDidMount",value:function componentDidMount(){this.fullscreenObserver=a.b.fullScreen.observe(this.onFullscreen)}},{key:"componentWillUnmount",value:function componentWillUnmount(){a.b.fullScreen.unobserve(this.fullscreenObserver)}}]),FullScreen}(o.a.Component))}},203:function(e,t,n){"use strict";n.d(t,"a",(function(){return getImageDimension})),n.d(t,"c",(function(){return loadImageFromFile})),n.d(t,"b",(function(){return getSVGDimensions}));var r=n(173),o=n.n(r);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={width:100,height:100};function getImageDimension(e,t){return new Promise((function(n,r){if(!e)return n(t||a);var o=new Image,s=function removeListeners(){o.onload=null,o.onerror=null};o.onload=function(){s(),n({width:o.naturalWidth,height:o.naturalHeight})},o.onerror=function(){s(),r(t||a)},o.src=e}))}function loadImageFromFile(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){var r=e.target.result;getImageDimension(r).then((function(e){t(_objectSpread(_objectSpread({},e),{},{src:r}))})).catch((function(e){n(e)}))},r.onerror=function(e){n({src:null,error:e})},r.readAsDataURL(e)}))}function getSVGDimensions(e,t){return new Promise((function(n){e&&t?o.a.xml(e).mimeType("image/svg+xml").get((function(e,r){if(e)n(t||a);else{var o=r.documentElement.attributes,s=o.viewBox&&o.viewBox.value.split(" "),l=s?s[2]/s[3]:1,c=o.width?parseInt(o.width.value.replace("px","")):t.width,u=c/l||t.height;n({width:c,height:u})}})):n(t||a)}))}},209:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(130),c=n(128),u=n(21);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MaskableElement,e);var t=_createSuper(MaskableElement);function MaskableElement(){var e;_classCallCheck(this,MaskableElement);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"maskId",o.a.uniqueId()),_defineProperty(_assertThisInitialized(e),"state",{renderComplete:!1}),_defineProperty(_assertThisInitialized(e),"buttonRef",(function(t){var n=e.props.buttonRef;e.button=t,n&&n(t)})),_defineProperty(_assertThisInitialized(e),"onToggleMasking",(function(){var t=e.props,n=t.baseActions,r=t.onChange,o=e.hasMask();r&&r(!o),n.toggleComponentMask(e.maskId)})),e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(MaskableElement,[{key:"componentDidMount",value:function componentDidMount(){this.setState({renderComplete:!0})}},{key:"hasMask",value:function hasMask(){var e=this.props.base.maskIds;return o.a.contains(e,this.maskId)}},{key:"generateAriaLabel",value:function generateAriaLabel(){var e=this.props,t=e.base,n=e.ariaLabel,r=t.inMaskingState,o=t.i18n.labels.masking;return n&&r?(this.hasMask()?o.ariaLabelUnmask:o.ariaLabelMask)+" - "+n:null}},{key:"render",value:function render(){var e=this,t=this.props,n=t.hidden,r=t.base,o=t.draggable,a=r.inMaskingState,l=r.disabled,c=this.state.renderComplete,u=this.hasMask(),f=!n&&(u||a),p=o&&a,d=l?void 0:this.onToggleMasking;if(!f)return null;var h=function(){if(u&&c){var t=e.button,n=t.clientWidth,r=t.clientHeight;return e.generateMask(n,r)}return null}(),y=!a||void 0;return s.a.createElement("button",{type:"button",className:"lrn-mask",onClick:d,onTouchEnd:p?d:null,disabled:!a,ref:this.buttonRef,"aria-label":this.generateAriaLabel(),"aria-hidden":y},h)}},{key:"generateMask",value:function generateMask(e,t){for(var n=e+t,r=[],o=15;o<n;o+=15)r.push(s.a.createElement("line",{key:o,className:"lrn-line1",x1:"0",y1:o,x2:o,y2:"0"}));return(s.a.createElement("svg",{className:"lrn-mask",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"transparent"}),r))}}]),MaskableElement}(s.a.Component);f=c.b((function(e){return{base:e.base}}),(function(e){return{baseActions:l.b(u.a,e)}}))(f),t.a=f},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return enhanceWithCharacterMap}));var r=n(0),o=n.n(r),a=n(18),s=n.n(a),l=n(160);function enhanceWithCharacterMap(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreFormattingOptions:!1},n=e.data,r=e.question,a=e.activity,c=a.get("i18n");Object(l.a)(e,{characterMap:function characterMap(){if(o.a.isUndefined(n.characterMap)){var characterMap=r.character_map;(function(){if(t.ignoreFormattingOptions)return o.a.isEmpty(characterMap);var e=o.a.isArray(r.formatting_options)?r.formatting_options:[];return(o.a.isUndefined(characterMap)||o.a.isArray(characterMap)&&!characterMap.length)&&e.indexOf("charactermap")>=0})()?n.characterMap=!0:o.a.isArray(characterMap)?n.characterMap=characterMap.map((function(e){return s.a.stripHTML(s.a.createImageDescriptions(e),!0)})):o.a.isBoolean(characterMap)?n.characterMap=characterMap:n.characterMap=!1}return n.characterMap},characterMathMap:function characterMathMap(){return o.a.isUndefined(n.characterMathMap)&&(n.characterMathMap=c.labels.characterMapMathCharacters),n.characterMathMap}})}},213:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_incorrectBubble"><strong>'+(null==(__t=labels.correctAnswer)?"":__t)+':</strong><p class="lrn_answer">'+(null==(__t=correctAnswer)?"":__t)+"</p></div>";return __p}},221:function(e,t,n){"use strict";var r=n(127),o=n.n(r);t.a={Label:function Label(e){return e.children?o.a.createElement("span",{className:"lrn-accessibility-label"},e.children):null}}},224:function(e,t,n){"use strict";n.d(t,"a",(function(){return withNonUpdatable}));var r=n(127),o=n.n(r);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function withNonUpdatable(e){var t=!1;return(function(n){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(_class,n);var r=_createSuper(_class);function _class(){return _classCallCheck(this,_class),r.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(_class,[{key:"componentDidMount",value:function componentDidMount(){t=!0}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!t}},{key:"render",value:function render(){return o.a.createElement(e,this.props)}}]),_class}(o.a.Component))}},227:function(e,t,n){"use strict";function isTouchEvent(e){return!!e.targetTouches}function getEventPosition(e){var t=e.nativeEvent||e,n=isTouchEvent(t)?t.targetTouches[0]:t;return{x:n.pageX,y:n.pageY}}n.d(t,"b",(function(){return isTouchEvent})),n.d(t,"a",(function(){return getEventPosition}))},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return Spinner}));var r=n(127),o=n.n(r);function Spinner(){return o.a.createElement("span",{className:"lrn-loader"},o.a.createElement("span",{className:"lrn_spinner"},o.a.createElement("span",{className:"lrn_bounce1"}),o.a.createElement("span",{className:"lrn_bounce2"}),o.a.createElement("span",{className:"lrn_bounce3"})))}},246:function(e,t,n){"use strict";n.d(t,"a",(function(){return enhanceWithImageUpload}));var r=n(0),o=n.n(r),a=n(5),s=n.n(a),l=(n(2),n(160)),c=n(235);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function enhanceWithImageUpload(e,t){var n=e.model,r=e.activity,a=e.data;Object(l.a)(e,{maxFileSize:function maxFileSize(){return a.maxFileSize||(a.maxFileSize=1e6),a.maxFileSize},maxFileSizeInMB:function maxFileSizeInMB(){return e.maxFileSize/1e3/1e3},warningFileSize:function warningFileSize(){return a.warningFileSize||(a.warningFileSize=4e6),a.warningFileSize},responseValue:function responseValue(){var e=this.getResponse(),t=o.a.getNested(e,"value");if(!t||t.indexOf("<img ")<0)return t;var n=document.createElement("DIV");return n.innerHTML=t,o.a.each(n.querySelectorAll("img"),(function(e){var t=e.getAttribute("data-asset-path");if(t){var n=f.resume(t);e.src=n.getViewUrl()}})),n.innerHTML}});r.get("consumer");var u=o.a.extend({},s.a.Events),f=new c.a({activity:r,eventBus:u,modelId:n.get("id"),responseId:n.get("response_id"),compression:o.a.extend({size:e.maxFileSize},t)}),p=function upload(e){return new Promise((function(t,n){var r=f.upload(e),o=function cleanUp(){u.off("fileUploaded",a),u.off("fileUploadFailed",s)},a=function onSuccess(){var e=r.getViewUrl();o(),t({url:e,assetPath:r.get("assetPath")})},s=function onError(e){o(),n(e)};u.once("fileUploaded",a),u.once("fileUploadFailed",s)}))};e.uploadImage=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.a.isNumber(n.rotation)&&n.rotation<0?e.compressImage(t,_objectSpread(_objectSpread({},n),{},{quality:1})).then(p):p(t)},e.compressImage=function(e,t){return f.compressImage(e,t)},e.formatValue=o.a.wrap(e.formatValue,(function(t,n){return n=((n=t?t.call(e,n)||"":n)||"").replace(/<img([^>]*)(src=".*?")([^>]*)>/gi,"<img$1$3>").replace(/<img\s+([^>]*)>/g,"<img $1>").replace(/<img\s+([^>]*)\s+>/g,"<img $1>").replace(/<img >/,"<img>")})),e.EXPOSED_METHODS.indexOf("uploadImage")<0&&e.EXPOSED_METHODS.push("uploadImage","compressImage","formatValue")}},248:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(132),c=n.n(l);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=/{{response}}/g,f=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Template,e);var t=_createSuper(Template);function Template(){return _classCallCheck(this,Template),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Template,[{key:"componentDidMount",value:function componentDidMount(){this.forceUpdate()}},{key:"render",value:function render(){var e,t,n=this,r=this.props,l=r.className,f=r.html,p=r.Input,d=r.inputs,h=this.el&&this.el.querySelectorAll("[".concat("data-lrn-template-response","]"));return s.a.createElement(a.Fragment,null,s.a.createElement("div",{className:l,dangerouslySetInnerHTML:(e=f,t="<span ".concat("data-lrn-template-response","></span>"),{__html:e.replace(u,t)}),ref:function ref(e){return n.el=e}}),o.a.map(h,(function(e,t){return c.a.createPortal(s.a.createElement(p,d[t]),e)})))}}],[{key:"countHooks",value:function countHooks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.match(u)||"").length}}]),Template}(s.a.Component);t.a=f},249:function(e,t,n){"use strict";n.d(t,"a",(function(){return formatDimensionString}));var r,o,a,s=n(0),l=n.n(s),c=n(8);r=c.a.prototype.FONTSIZE_MAP,o=r.small,a=r.normal,r.large,r.xlarge,r.xxlarge;function formatDimensionString(e){if(l.a.isUndefined(e))return e;if(l.a.isNumber(e))return"".concat(e,"px");if(l.a.isString(e)){return function containsValidUnit(e){for(var t=["px","%","em"],n=0;n<t.length;n++)if(e.indexOf(t[n])>0)return!0;return!1}(e)?e:"".concat(parseFloat(e),"px")}}},253:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(127),o=n.n(r),a=n(128),s=n(129),l=n.n(s),c=n(7),u=n.n(c);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(BaseFeature,e);var t=_createSuper(BaseFeature);function BaseFeature(){return _classCallCheck(this,BaseFeature),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(BaseFeature,[{key:"render",value:function render(){var e=this.classNames,t=this.props.base.featureId;return o.a.createElement("div",{id:t,className:e},this.props.children)}},{key:"classNames",get:function get(){var e,t=this.props,n=t.base,r=t.customClassNames,o=n.featureType,a=n.fontSizeClass;return l()("lrn lrn_widget lrn_feature lrn_".concat(o),(_defineProperty(e={},r,r),_defineProperty(e,"lrn-ie","ie"===u.a.browser),_defineProperty(e,"lrn-ios",u.a.isIOS),_defineProperty(e,a,a),e))}}]),BaseFeature}(o.a.Component);t.b=a.b((function(e){return{base:e.base}}),null)(f)},254:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function BaseDataService(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseDataService),this.model=e,this.activity=e.activity,this.featureFacade=t,this.feature=e.getFeatureJsonForClient()}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(BaseDataService,[{key:"getInitialState",value:function getInitialState(){var e=this.activity,t=this.model,n=this.feature,r=this.featureId,a=!!o.a.getNested(e.get("render_optimization"),"defer_render");return{base:{featureId:r,isRenderDeferred:a,disabled:!1,featureType:n.type,fontSizeClass:t.getFontClass(),i18n:e.get("i18n"),isRendered:!a,customClassNames:[]}}}},{key:"getFacade",value:function getFacade(){var e=this;return this._facade||(this._facade={},this.EXPOSED_METHODS.forEach((function(t){e._facade[t]=e[t].bind(e)}))),this._facade}},{key:"triggerFeatureFacadeEvent",value:function triggerFeatureFacadeEvent(){var e=this.featureFacade;e&&o.a.isFunction(e.trigger)&&e.trigger.apply(e,arguments)}},{key:"featureId",get:function get(){var e=this.feature;return o.a.isUndefined(e.feature_id)?e.simplefeature_id:e.feature_id}}]),BaseDataService}();a.prototype.EXPOSED_METHODS=["triggerFeatureFacadeEvent"],t.a=a},256:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(5),s=n.n(a);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l,c=function(){function FeatureFacade(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FeatureFacade);var t=e.model;this.view=e,this.model=t,e.simpleFeatureFacades=e.simpleFeatureFacades||{}}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(FeatureFacade,[{key:"facade",get:function get(){if(this._facade)return this._facade;var e=this.view,t=this.model;return this._facade={on:s.a.Events.on,off:s.a.Events.off,once:s.a.Events.once,trigger:s.a.Events.trigger,begin:function begin(){return e.begin()},pause:function pause(){return e.pause()},stop:function stop(){return e.stop()},toggle:function toggle(t,n){return e.toggle(t,n)},disable:function disable(){return e.setDisabled(!0)},enable:function enable(){return e.setDisabled(!1)},startMirror:function startMirror(){return e.startMirror()},stopMirror:function stopMirror(){return e.stopMirror()},render:function render(){return e.forceRender()},checkImages:function checkImages(){if(e.imageLoader)return e.imageLoader.checkImages()},retryLoadImages:function retryLoadImages(){e.imageLoader&&e.imageLoader.loadImages()},simpleFeatures:function simpleFeatures(){return o.a.clone(e.simpleFeatureFacades)},simpleFeature:function simpleFeature(t){return e.simpleFeatureFacades[t]},destroy:function destroy(){var n=this;e.remove(),t.destroy(),o.a.each(n,(function(e,t){delete n[t]}))},isRendered:function isRendered(){return e.isRendered()}},this._facade}}]),FeatureFacade}(),u=n(39),f=n(127),p=n.n(f),d=n(132),h=n.n(d),y=n(130),v=n(128),m=n(196),b=n(174),g=n(25);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=b.a.actionTypes,w=(_defineProperty(l={},O.FEATURE_SET_DISABLED,(function(e,t){return{disabled:t.disabled}})),_defineProperty(l,O.FEATURE_NOTIFY_RENDERED,(function(e){return{isRendered:!0}})),l),S=Object(g.a)(w,{disabled:!1}),P=n(146),C=n(38),R=n(32),T=n(150),k=n(165),I=n(147),M=n(151),D=v.b((function(e){return{isRendered:e.base.isRendered,isRenderDeferred:e.base.isRenderDeferred}}),(function(e){return{renderMathIfRequired:y.b(b.a.renderMathIfRequired,e),renderSimpleFeatures:y.b(b.a.renderSimpleFeatures,e),notifyRenderComplete:y.b(b.a.notifyRenderComplete,e)}}))(M.a);function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=s.a.View.extend({initialize:function initialize(){var e=this.model,t=this.options,n=t.activity,r=t.i18n;this.activity=n,e.activity||(n||(n=new s.a.Model({i18n:r})),e.activity=n),this.remove=this.remove.bind(this),this.initialisationCompleted=this.initialisationCompleted.bind(this),this._featureId=this.getDataService().featureId,this.render(),this.initialisationCompleted(),this.applyRemovalDetector()},applyRemovalDetector:function applyRemovalDetector(){P.a.watch('[id="'.concat(this._featureId,'"]'),this.remove)},getDataService:function getDataService(){if(!this._dataService){var e=this.DataService;this._dataService=new e(this.model,this.getFacade())}return this._dataService},getStore:function getStore(){if(!this._store){var e=this.getDataService(),t=this.getReducers(),n=this.getMiddleware();this._store=Object(y.d)(Object(y.c)(t),e.getInitialState(),Object(T.a)(y.a.apply(void 0,_toConsumableArray(n))))}return this._store},getMiddleware:function getMiddleware(){var e=this,t=this.getDataService().getFacade(),n=this.getMathService(),r={render:function renderViewSimpleFeatures(){var renderViewSimpleFeatures=e.options.services.renderViewSimpleFeatures;return renderViewSimpleFeatures(e)}};return[m.a.withExtraArgument({dataService:t,mathService:n,simpleFeatureService:r})]},getReducers:function getReducers(){return{base:S}},render:function render(){var e=this,t=this.getRootElement,n=this.getStore(),r=this.ViewComponent,o=document.createElement("div");return this.$el.replaceWith(o),this.setElement(o),this._attachWidgetInfo(o),h.a.render(p.a.createElement(I.a,{ref:function ref(t){return e.component=t}},p.a.createElement(v.a,{store:n},p.a.createElement(D,{getRootElement:t.bind(this)},p.a.createElement(r,null)))),this.el),this},getRootElement:function getRootElement(){return this.el},remove:function remove(){if(!this._removed){this.visibilityChangeObserver&&this.visibilityChangeObserver.stop();try{var e=h.a.findDOMNode(this.component);e&&!this.$el.find(e).length&&this.$el.append(e),this.el&&(this._unmounted=h.a.unmountComponentAtNode(this.el))}catch(e){}s.a.View.prototype.remove.call(this),P.a.unwatch('[id="'.concat(this._featureId,'"]')),this._removed=!0}},initialisationCompleted:function initialisationCompleted(){var e=this.activity,t=e&&e.hooks;this.el&&(o.a.isFunction(this.applyComputedVisibility)&&(this.visibilityChangeObserver=new k.a(this.el,this.applyComputedVisibility.bind(this)),o.a.getNested(e,"attributes.mirror_visibility")&&this.visibilityChangeObserver.start()),this.imageLoader=new u.a({element:this.el}),this.imageLoader.loadImages()),t&&t.reset.push(this.reset.bind(this)),this.options.initialisationCallback&&o.a.defer(this.options.initialisationCallback)},getFacade:function getFacade(){if(o.a.isUndefined(this.featureFacade)){var e=new c(this).facade;this.featureFacade=e,this.addFacadeMethods(e)}return this.featureFacade},addFacadeMethods:function addFacadeMethods(e){},getMathService:function getMathService(){return o.a.isUndefined(this._mathService)&&(this._mathService=new R.a(this,"feature")),this._mathService},begin:function begin(){this.getFacade().trigger("complete")},pause:function pause(){},stop:function stop(){},forceRender:function forceRender(){return!this.isRendered()&&(this.getStore().dispatch(b.a.notifyRendered()),!0)},isRendered:function isRendered(){return this.getStore().getState().base.isRendered},toggle:function toggle(e,t){this.getStore().getState().base.disabled||(this.hiddenByComputedVisibilityChange=!1,this.getStore().dispatch(b.a.toggle(e,t)))},startMirror:function startMirror(){this.visibilityChangeObserver&&this.visibilityChangeObserver.start()},stopMirror:function stopMirror(){this.visibilityChangeObserver&&this.visibilityChangeObserver.stop()},setDisabled:function setDisabled(e){e?this.undelegateEvents():this.delegateEvents(),this.getStore().dispatch(b.a.setDisabled(e))},renderSimpleFeatures:function renderSimpleFeatures(e){return C.a.renderSimpleFeatures.call(this,this.$el,this.activity,e)},reset:function reset(){this.getFacade().trigger("reset")},_attachWidgetInfo:function _attachWidgetInfo(e){e&&(e.setAttribute("data-lrn-widget-container",this._featureId),e.setAttribute("data-lrn-widget-type","feature"))}})},257:function(e,t,n){"use strict";var r=n(127),o=n.n(r),a=n(0),s=n.n(a),l=n(262),c=n.n(l),u={blockLevelEl:{keep_styles:{textAlign:/^((left)|(right)|(center)|(justify))$/i,float:1},add_style:{align:"align_text"},check_attributes:{id:"any"}},makeDiv:{rename_tag:"div",one_of_type:{alignment_object:1},remove_action:"unwrap",keep_styles:{textAlign:1,float:1},add_style:{align:"align_text"},check_attributes:{id:"any"}}},f={defaultRules:u,advancedRules:{classes:"any",classes_blacklist:{"Apple-interchange-newline":1,MsoNormal:1,MsoPlainText:1},type_definitions:{alignment_object:{classes:{"wysiwyg-text-align-center":1,"wysiwyg-text-align-justify":1,"wysiwyg-text-align-left":1,"wysiwyg-text-align-right":1,"wysiwyg-float-left":1,"wysiwyg-float-right":1},styles:{float:["left","right"],"text-align":["left","right","center"]}},valid_image_src:{attrs:{src:/^[^data\:]/i}},text_color_object:{styles:{color:!0,"background-color":!0}},text_fontsize_object:{styles:{"font-size":!0}},text_formatting_object:{classes:{"wysiwyg-color-aqua":1,"wysiwyg-color-black":1,"wysiwyg-color-blue":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-gray":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-maroon":1,"wysiwyg-color-navy":1,"wysiwyg-color-olive":1,"wysiwyg-color-purple":1,"wysiwyg-color-red":1,"wysiwyg-color-silver":1,"wysiwyg-color-teal":1,"wysiwyg-color-white":1,"wysiwyg-color-yellow":1,"wysiwyg-font-size-large":1,"wysiwyg-font-size-larger":1,"wysiwyg-font-size-medium":1,"wysiwyg-font-size-small":1,"wysiwyg-font-size-smaller":1,"wysiwyg-font-size-x-large":1,"wysiwyg-font-size-x-small":1,"wysiwyg-font-size-xx-large":1,"wysiwyg-font-size-xx-small":1}}},comments:1,tags:{tr:{add_style:{align:"align_text"},check_attributes:{id:"any"}},strike:{unwrap:1},form:{unwrap:1},rt:{rename_tag:"span"},code:{},acronym:{rename_tag:"span"},br:{add_class:{clear:"clear_br"}},details:{unwrap:1},h4:u.blockLevelEl,em:{},title:{remove:1},multicol:{unwrap:1},figure:{unwrap:1},xmp:{unwrap:1},small:{rename_tag:"span",set_class:"wysiwyg-font-size-smaller"},area:{remove:1},time:{unwrap:1},dir:{rename_tag:"ul"},bdi:{unwrap:1},command:{unwrap:1},ul:{check_attributes:{id:"any"}},progress:{rename_tag:"span"},dfn:{unwrap:1},iframe:{check_attributes:{src:"any",width:"any",height:"any",frameborder:"any",style:"any",id:"any"}},figcaption:{unwrap:1},a:{check_attributes:{href:"href",rel:"any",target:"any",id:"any"}},img:{one_of_type:{valid_image_src:1},check_attributes:{width:"dimension",alt:"alt",src:"src",height:"dimension",id:"any"},add_class:{align:"align_img"}},rb:{unwrap:1},footer:u.makeDiv,noframes:{remove:1},abbr:{unwrap:1},u:{},bgsound:{remove:1},sup:{},address:{unwrap:1},basefont:{remove:1},nav:{unwrap:1},h1:u.blockLevelEl,head:{unwrap:1},tbody:u.blockLevelEl,dd:{unwrap:1},s:{unwrap:1},li:{},td:{check_attributes:{rowspan:"numbers",colspan:"numbers",valign:"any",align:"any",id:"any",class:"any"},keep_styles:{backgroundColor:1,width:1,height:1},add_style:{align:"align_text"}},object:{remove:1},div:{keep_styles:{textAlign:1,float:1},check_attributes:{id:"any",contenteditable:"any","data-lrn-wysihtml-widget":"any","data-lrn-code-editor-id":"any"}},option:{remove:1},select:{remove:1},i:{},track:{remove:1},wbr:{remove:1},fieldset:{unwrap:1},big:{rename_tag:"span",set_class:"wysiwyg-font-size-larger"},button:{remove:1},noscript:{remove:1},svg:{remove:1},input:{remove:1},table:{keep_styles:{width:1,textAlign:1,float:1},check_attributes:{id:"any"}},keygen:{remove:1},h5:u.blockLevelEl,meta:{remove:1},map:{remove:1},isindex:{remove:1},mark:{unwrap:1},caption:u.blockLevelEl,tfoot:u.blockLevelEl,base:{remove:1},video:{remove:1},strong:{},canvas:{remove:1},output:{unwrap:1},marquee:{unwrap:1},b:{},q:{check_attributes:{cite:"url",id:"any"}},applet:{remove:1},span:{one_of_type:{text_formatting_object:1,text_color_object:1,text_fontsize_object:1},keep_styles:{color:1,backgroundColor:1,fontSize:1},remove_action:"unwrap",check_attributes:{id:"any"}},rp:{unwrap:1},spacer:{remove:1},source:{remove:1},aside:u.makeDiv,frame:{remove:1},section:u.makeDiv,body:{unwrap:1},ol:{},nobr:{unwrap:1},html:{unwrap:1},summary:{unwrap:1},var:{unwrap:1},del:{unwrap:1},blockquote:{keep_styles:{textAlign:1,float:1},add_style:{align:"align_text"},check_attributes:{cite:"url",id:"any"}},style:{check_attributes:{type:"any",src:"any",charset:"any"}},device:{remove:1},meter:{unwrap:1},h3:u.blockLevelEl,textarea:{unwrap:1},embed:{remove:1},hgroup:{unwrap:1},font:{rename_tag:"span",add_class:{size:"size_font"}},tt:{unwrap:1},noembed:{remove:1},thead:{add_style:{align:"align_text"},check_attributes:{id:"any"}},blink:{unwrap:1},plaintext:{unwrap:1},xml:{remove:1},h6:u.blockLevelEl,param:{remove:1},th:{check_attributes:{rowspan:"numbers",colspan:"numbers",valign:"any",align:"any",id:"any"},keep_styles:{backgroundColor:1,width:1,height:1},add_style:{align:"align_text"}},legend:{unwrap:1},hr:{},label:{unwrap:1},dl:{unwrap:1},kbd:{unwrap:1},listing:{unwrap:1},dt:{unwrap:1},nextid:{remove:1},pre:{},center:u.makeDiv,audio:{remove:1},datalist:{unwrap:1},samp:{unwrap:1},col:{remove:1},article:u.makeDiv,cite:{},link:{remove:1},script:{check_attributes:{type:"any",src:"any",charset:"any"}},bdo:{unwrap:1},menu:{rename_tag:"ul"},colgroup:{remove:1},ruby:{unwrap:1},h2:u.blockLevelEl,ins:{unwrap:1},p:u.blockLevelEl,sub:{},comment:{remove:1},frameset:{remove:1},optgroup:{unwrap:1},header:u.makeDiv}}},p=n(210);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={bold:"bold",italic:"italic",underline:"underline",orderedList:"insertOrderedList",unorderedList:"insertUnorderedList",removeFormat:"removeFormat",alignLeft:"alignLeftStyle",alignCenter:"alignCenterStyle",alignRight:"alignRightStyle",alignJustify:"alignJustifyStyle",superscript:"superscript",subscript:"subscript",insertHorizontalRule:"insertHorizontalRule",indentIncrease:"increaseIndent",indentDecrease:"decreaseIndent",textDirectionLtr:"textDirectionLtr",textDirectionRtl:"textDirectionRtl",blockquote:"insertBlockQuote",createTable:"createTable",deleteTable:"deleteTable",addTableCells:"addTableCells",deleteTableCells:"deleteTableCells",insertImage:"insertImage",characterMap:"insertHTML",createFormula:"createFormula",editFormula:"editFormula",codeInline:"codeInline",codeEditor:"codeEditor",undo:"undo",redo:"redo"},h="F10",y=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WYSIHTMLEditor,e);var t=_createSuper(WYSIHTMLEditor);function WYSIHTMLEditor(){var e;_classCallCheck(this,WYSIHTMLEditor);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"state",{tableCellSelected:!1}),_defineProperty(_assertThisInitialized(e),"handleKeyDown",(function(t){var n=e.props.focusButtonInsideToolbar;t.altKey&&t.key===h&&n()})),_defineProperty(_assertThisInitialized(e),"createEditor",(function(){var t=e.props,n=t.stripExternalPastedImages,r=t.stripExternalPastedMath,o=t.invalidExternalImageWarning,a=t.invalidExternalMathWarning,s=new c.a.Editor(e.el,{stripExternalPastedImages:n,stripExternalPastedMath:r,invalidExternalImageWarning:o,invalidExternalMathWarning:a,isReviewState:e.props.isReviewState,autoLink:!e.props.disableAutoLink,toolbar:null,useLineBreaks:!1,handleTabKey:!1,parserRules:f.advancedRules}),l=e.props.value;s.on("load",(function(){l&&s.setValue(l,!1)})),s.on("interaction",e.onInteraction),s.on("tableselectstart",e.onTableSelectStart),s.on("tableunselect",e.onTableUnselect),s.on("codeEditor:focus",e.onCodeEditorFocus),s.on("codeEditor:blur",e.onCodeEditorBlur),s.on("blur",e.onBlur),s.installPlugin("widget"),s.installPlugin("mathWidget"),s.installPlugin("codeEditorWidget"),s.on("mathWidget:select",e.onMathWidgetSelect),s.on("mathWidget:paste",e.onMathWidgetPaste),e.editor=s,e.oldValue=e.value})),_defineProperty(_assertThisInitialized(e),"doAction",(function(t){var n=_assertThisInitialized(e),r=n.props,o=n.editor,a=r.onActionDone,l=d[t.type],c=function notifyActionDone(){a(e.getActiveActions(),t),e.onInteraction()},u=function executeDelayedAction(){var t=e.actionInProgress;if(t){var n=d[t.type];e.actionInProgress=!1,e.tryToExecuteCommand(n,t.params)}},f=s.a.contains(["createTable","deleteTable","addTableCells","deleteTableCells","characterMap","insertImage","createFormula","insertHTML"],t.type);t&&("undo"!==t.type&&"redo"!==t.type||!e._hasCodeEditorFocus?f?(e.actionInProgress=t,"insertImage"===t.type?s.a.defer((function(){o.restoreBookmark(),u(),c()})):(o.restoreBookmark(),"deleteTable"===t.type&&o.fire("tableunselect"),u(),c())):(o.focus(!1),"deleteImage"===t.type?e.tryToExecuteCommand("insertImage",{src:null}):e.tryToExecuteCommand(l,t.params),c()):e.tryToExecuteCommand(l,t.params))})),_defineProperty(_assertThisInitialized(e),"onInteraction",s.a.debounce((function(){var t=_assertThisInitialized(e),n=t.props,r=t.oldValue,o=t.value,a=n.onInteraction,s=n.onValueChange;e.editor&&(r!==o&&s(o),a(e.getActiveActions()),e.oldValue=o)}),100)),_defineProperty(_assertThisInitialized(e),"onCodeEditorFocus",(function(){e._hasCodeEditorFocus=!0,e.props.onCodeEditorFocusChange(e._hasCodeEditorFocus)})),_defineProperty(_assertThisInitialized(e),"onCodeEditorBlur",(function(){e._hasCodeEditorFocus=!1,e.props.onCodeEditorFocusChange(e._hasCodeEditorFocus)})),_defineProperty(_assertThisInitialized(e),"onBlur",(function(){(0,_assertThisInitialized(e).props.onInteraction)([]),e.onInteraction()})),_defineProperty(_assertThisInitialized(e),"onMathWidgetSelect",(function(t){(0,_assertThisInitialized(e).props.onMathWidgetSelect)(p.default.getDataFromEvent(t))})),_defineProperty(_assertThisInitialized(e),"onMathWidgetPaste",(function(){var t=e.props.onMathWidgetPaste;s.a.isFunction(t)&&t()})),_defineProperty(_assertThisInitialized(e),"onTableSelectStart",(function(){e.setState({tableCellSelected:!0})})),_defineProperty(_assertThisInitialized(e),"onTableUnselect",(function(){e.setState({tableCellSelected:!1})})),_defineProperty(_assertThisInitialized(e),"tryToExecuteCommand",(function(t,n){try{e.editor.composer.commands.exec(t,n)}catch(e){console.warn(e)}})),_defineProperty(_assertThisInitialized(e),"destroyEditor",(function(){var t=_assertThisInitialized(e).editor;t&&(t.destroy(),delete e.editor)})),_defineProperty(_assertThisInitialized(e),"disable",(function(t){var n=_assertThisInitialized(e).editor;if(n){if(t)return n.plugins.codeEditorWidget.setDisabled(n.composer,!0),n.disable();n.plugins.codeEditorWidget.setDisabled(n.composer,!1),n.enable()}})),e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(WYSIHTMLEditor,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e){var t=this;return!!s.a.find(["className","actionToDo","disabled","inactive"],(function(n){return e[n]!==t.props[n]}))}},{key:"render",value:function render(){var e=this,t=this.props,n=t.spellCheck,r=t.autocomplete,a=t.autocapitalize,s=t.autocorrect,l=t.placeholder,c=t.className,u=t.ariaLabel,f=t.uiStyle,p=t.focusButtonInsideToolbar;return o.a.createElement("div",{className:c,style:f,spellCheck:n,autoComplete:r,autoCapitalize:a,autoCorrect:s,"aria-label":u,role:"textbox","aria-multiline":"true",tabIndex:"0",onKeyDown:p&&this.handleKeyDown,"data-placeholder":l,ref:function ref(t){return e.el=t},contentEditable:!0})}},{key:"componentDidMount",value:function componentDidMount(){this.createEditor()}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=this.props,n=t.actionToDo,r=t.disabled,o=t.inactive;!this.actionInProgress&&e.actionToDo&&(!n||n.type!==e.actionToDo.type)&&this.doAction(e.actionToDo),r!==e.disabled&&this.disable(e.disabled),o!==e.inactive&&e.inactive&&this.editor.saveBookmark()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.destroyEditor()}},{key:"getActiveActions",value:function getActiveActions(){var e=this.state,t=this.editor,n=e.tableCellSelected,r=[];return n&&r.push({action:"editTable"}),t&&s.a.each(d,(function(e,n){var o=t.composer.commands.state(d[n]);o&&r.push({target:o,action:n})})),r}},{key:"value",get:function get(){var e=this.editor;if(e)return e.getValue(!1)}}]),WYSIHTMLEditor}(o.a.Component),v=n(199),m=n(129),b=n.n(m);function lrnEditor_typeof(e){return(lrnEditor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lrnEditor_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lrnEditor_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lrnEditor_setPrototypeOf(e,t){return(lrnEditor_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function lrnEditor_createSuper(e){var t=function lrnEditor_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=lrnEditor_getPrototypeOf(e);if(t){var o=lrnEditor_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lrnEditor_possibleConstructorReturn(this,n)}}function lrnEditor_possibleConstructorReturn(e,t){if(t&&("object"===lrnEditor_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function lrnEditor_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function lrnEditor_getPrototypeOf(e){return(lrnEditor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a={WYSIHTML:function wrapEditor(e){return function(t){!function lrnEditor_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lrnEditor_setPrototypeOf(e,t)}(LRNEditor,t);var n=lrnEditor_createSuper(LRNEditor);function LRNEditor(){return lrnEditor_classCallCheck(this,LRNEditor),n.apply(this,arguments)}return function lrnEditor_createClass(e,t,n){return t&&lrnEditor_defineProperties(e.prototype,t),n&&lrnEditor_defineProperties(e,n),e}(LRNEditor,[{key:"componentDidMount",value:function componentDidMount(){this.props.readOnly&&v.a.render({readOnly:!0})}},{key:"render",value:function render(){var t=this.props,n=this.props,r=n.readOnly,a=n.uiStyle,s=this.className,l=this.ariaLabel,c=this.props.responseValue;return r?o.a.createElement("div",{className:s,"aria-label":l,role:"textbox","aria-multiline":"true",dangerouslySetInnerHTML:{__html:c},style:a}):o.a.createElement(e,_extends({},t,{className:s,ariaLabel:l,uiStyle:a,value:c}))}},{key:"className",get:function get(){var e=this.props,t=e.isReviewState,n=e.limitExceeded,r=e.className,o=b()({lrn_wordcount_warning:n}),a=t?"lrn_response_input_wrapper":"";return b()("lrn_texteditor_editable","lrn_editor_area",r,o,a)}},{key:"ariaLabel",get:function get(){return this.props.i18n.labels.editor.inputAriaLabel}}]),LRNEditor}(o.a.Component)}(y)}},258:function(e,t,n){"use strict";var r=n(0),o=n.n(r);t.a=function ariaLabelable(e){return o()(e).assign({generateAriaLabel:function generateAriaLabel(){var e=this.props,t=e.ariaLabel,n=e.validation,r=e.i18nLabels;return n.isAriaLabelVisible?o.a.exists(t)?"".concat(t," - ").concat(r.responseArea," ").concat(n.ariaLabel):"".concat(r.responseArea," ").concat(n.ariaLabel):o.a.exists(t)?t:r.responseArea}})}},263:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(21),s=n(23),l=n(7),c=n.n(l),u={CLOZE_SET_ARIA_LIVE_TEXT:"cloze:setAriaLiveText",CLOZE_SET_DRAG_DROP_RESPONSE:"cloze:setDragDropResponse",CLOZE_SET_HAS_ACTIVE_RESPONSE:"cloze:setHasActiveResponse",CLOZE_SET_RESPONSE:"cloze:setResponse",CLOZE_SET_RESPONSE_CONTAINER_WIDTH:"cloze:setResponseContainerWidth",CLOZE_SET_RESPONSE_CHARACTER:"cloze:setResponseCharacter",CLOZE_SET_RESPONSE_CONTAINER_FOCUS:"cloze:setResponseContainerFocus",CLOZE_SET_RESPONSE_CONTAINER_SELECTION:"cloze:setResponseContainerSelection"};t.a={actionTypes:u,setAriaLiveText:function setAriaLiveText(e){return function(t){t({type:u.CLOZE_SET_ARIA_LIVE_TEXT,payload:{ariaLiveText:e}})}},setDragDropResponse:function setDragDropResponse(e){return function(t,n,r){t(s.a.clearValidationUI()),t({type:u.CLOZE_SET_DRAG_DROP_RESPONSE,payload:e});var o=n().cloze.value;t(a.a.updateResponseValue(o)),"ie"===c.a.browser&&r.simpleFeatureService.render()}},setHasActiveResponse:function setHasActiveResponse(e){return function(t){t({type:u.CLOZE_SET_HAS_ACTIVE_RESPONSE,payload:{hasActiveResponse:e}})}},setResponse:function setResponse(e,t){return function(n,r){n(s.a.clearValidationUI()),n({type:u.CLOZE_SET_RESPONSE,payload:{index:e,value:t}});var l=r().cloze.ignoreLeadingAndTrailingSpaces,c=r().cloze.value.map((function(e){if(o.a.isString(e))return l?o.a.trim(e):e}));n(a.a.updateResponseValue(c))}},setResponseContainerWidth:function setResponseContainerWidth(e,t){return function(n){return n({type:u.CLOZE_SET_RESPONSE_CONTAINER_WIDTH,payload:{indexes:e,width:t}})}},setResponseCharacter:function setResponseCharacter(e,t,n){return function(r,l){r(s.a.clearValidationUI()),r({type:u.CLOZE_SET_RESPONSE_CHARACTER,payload:{index:e,character:t,options:n}});var c=l().cloze.value.map((function(e){return o.a.isString(e)?e.trim():e}));r(a.a.updateResponseValue(c))}},setResponseContainerFocus:function setResponseContainerFocus(e,t){return function(n){n(s.a.clearValidationUI()),n({type:u.CLOZE_SET_RESPONSE_CONTAINER_FOCUS,payload:{index:e,isFocused:t}})}},setResponseContainerSelection:function setResponseContainerSelection(e,t){return function(n){return n({type:u.CLOZE_SET_RESPONSE_CONTAINER_SELECTION,payload:{index:e,selection:t}})}}}},264:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(56),s=n(248);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ClozeDataService,e);var t=_createSuper(ClozeDataService);function ClozeDataService(){return _classCallCheck(this,ClozeDataService),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(ClozeDataService,[{key:"getValidatedResponses",value:function getValidatedResponses(){return this.model.validateResponse()}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var e=this.getValidatedResponses(),t=_get(_getPrototypeOf(ClozeDataService.prototype),"getSuggestedResponses",this).call(this).value,n={value:o.a.chain(t).map((function(e,t){return{index:t,label:o.a.isEmpty(e)?"&nbsp;":e}})).reject((function(t){return e[t.index]})).value()};return o.a.isEmpty(n.value)?null:n}},{key:"dynamicShuffleSeed",get:function get(){return this.model.getDynamicShuffleSeed()}},{key:"ignoreLeadingAndTrailingSpaces",get:function get(){return this.model.getIgnoreLeadingAndTrailingSpaces()}},{key:"normalizedResponses",get:function get(){var e=this.getResponse(),t=e&&e.value,n=[];return o()(this.numberOfPossibleResponses).times((function(e){var r=o.a.isArray(t)&&t[e];n.push(r||null)})),n}},{key:"numberOfPossibleResponses",get:function get(){return s.a.countHooks(this.question.template)}},{key:"type",get:function get(){return"cloze"}},{key:"validation",get:function get(){var e=this.question.validation||{},t=e.valid_responses,n=o.a.getNested(e,"valid_response.value");return o.a.isArray(t)?t:o.a.isArray(n)?n:[]}}]),ClozeDataService}(a.a);t.a=l},266:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(227),c=n(137),u=n(134);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={moved:["mousemove","touchmove"],moveEnd:["mouseup","touchend","touchcancel"]};t.a=function(e){return function(t){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Movable,t);var n=_createSuper(Movable);function Movable(e){var t;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Movable),_defineProperty(_assertThisInitialized(t=n.call(this,e)),"onMoveWithKeydown",(function(e){if(Object(u.c)(e)){e.preventDefault(),e.stopPropagation();var n=t.state.position;Object(u.d)(e)?n.x-=5:Object(u.e)(e)?n.x+=5:Object(u.f)(e)?n.y-=5:Object(u.b)(e)&&(n.y+=5);var r=t.getBoundedPosition(n);t.setState({position:r,moving:!0})}})),_defineProperty(_assertThisInitialized(t),"onMoveWithKeyUp",(function(e){t.setState({moving:!1})})),_defineProperty(_assertThisInitialized(t),"moveStart",(function(e){t.setState({moving:!0}),t.addDocumentListeners(),t.updateBounds(),t.startMovePos=Object(l.a)(e),t.originalPos=t.state.position,e.preventDefault(),e.stopPropagation()})),_defineProperty(_assertThisInitialized(t),"moved",(function(e){t.state.moving&&t.startMovePos&&t.setState({position:t.calculateNewPosition(e)})})),_defineProperty(_assertThisInitialized(t),"moveEnd",(function(){t.setState({moving:!1}),t.removeDocumentListeners(),t.startMovePos=void 0})),_defineProperty(_assertThisInitialized(t),"setContentDimensions",(function(e){e&&t.setState({contentDimensions:e},t.updateBounds)})),_defineProperty(_assertThisInitialized(t),"forceUpdateBounds",(function(){var e=t.state,n=e.contentDimensions,r=e.boundsFactor,o=t.getContainerDimensions(),a=n.height*r,s=n.width*r;t.bounds={top:0-a,left:0-s,bottom:o.height-n.height+a,right:o.width-n.width+s}})),_defineProperty(_assertThisInitialized(t),"updateBounds",o.a.debounce(t.forceUpdateBounds,100));var r=t.props.position;return t.state={boundsFactor:o.a.isNumber(t.props.boundsFactor)?t.props.boundsFactor:.5,contentDimensions:{width:0,height:0},moving:!1,position:o.a.extend({x:null,y:null},r)},t}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Movable,[{key:"render",value:function render(){var t=o.a.extend({},this.props,{contentDimensions:this.state.contentDimensions,moveListeners:{mousedown:this.moveStart,touchstart:this.moveStart},moveWithKeyboardListeners:{keydown:this.onMoveWithKeydown,keyup:this.onMoveWithKeyUp},moving:this.state.moving,position:this.state.position,setContentDimensions:this.setContentDimensions});return(s.a.createElement(e,t))}},{key:"componentDidMount",value:function componentDidMount(){this.updateBounds(),window.addEventListener("resize",this.updateBounds)}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){o.a.isEqual(e.position,this.props.position)||(this.forceUpdateBounds(),this.updatePosition(e.position))}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){o.a.isEqual(t.contentDimensions,this.state.contentDimensions)||this.updateBounds()}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.updateBounds),this.removeDocumentListeners()}},{key:"getContainerDimensions",value:function getContainerDimensions(){var e=this.props.getContainerElement&&this.props.getContainerElement();return e?e.getBoundingClientRect():this.props.isFixedPosition?c.a.getViewportDimensions():c.a.getDocumentDimensions()}},{key:"updatePosition",value:function updatePosition(e){var t=this.getBoundedPosition(o.a.extend({},this.state.position,e));if(this.isFixedPosition){var n=c.a.getViewportScroll();t.x-=n.x,t.y-=n.y}this.setState({position:t})}},{key:"getBoundedPosition",value:function getBoundedPosition(e){return this.bounds?{x:Math.max(Math.min(e.x,this.bounds.right),this.bounds.left),y:Math.max(Math.min(e.y,this.bounds.bottom),this.bounds.top)}:e}},{key:"calculateNewPosition",value:function calculateNewPosition(e){var t=Object(l.a)(e),n=t.x-this.startMovePos.x,r=t.y-this.startMovePos.y;return this.getBoundedPosition({x:this.originalPos.x+n,y:this.originalPos.y+r})}},{key:"addDocumentListeners",value:function addDocumentListeners(){var e=this;o.a.each(f,(function(t,n){o.a.each(t,(function(t){document.addEventListener(t,e[n],!1)}))}))}},{key:"removeDocumentListeners",value:function removeDocumentListeners(){var e=this;o.a.each(f,(function(t,n){o.a.each(t,(function(t){document.removeEventListener(t,e[n])}))}))}}]),Movable}(s.a.Component)}},278:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(214),s=(n(135),!1),l="bottom",c=!0;function isDisabled(e){return o.a.chain(e.base).pick("disabled","inMaskingState","isPreviewState","isReviewState").any().value()}function generatePossibilityListPosition(e){var t=getQuestionKey(e),n="".concat(t,".question.ui_style.possibility_list_position"),r=o.a.getNested(e,n);return o.a.isString(r)?r:l}function generateResponseKey(e,t){var n=getQuestionKey(e);return"".concat(n,"_dragdrop_").concat(e.base.responseId,"_").concat(t)}function getResponseHtml(e,t){var n=(o()(e).findWhere({index:t})||{}).html;return void 0===n?null:n}function getSpokenMath(e,t){var n=(o()(e).findWhere({index:t})||{}).spokenMath;return void 0===n?null:n}function getQuestionKey(e){return o()(e).findKey((function(e){return o.a.isObject(e.question)}))}function shouldShowDragHandler(e){var t=getQuestionKey(e),n="".concat(t,".question.ui_style.show_drag_handle"),r=o.a.getNested(e,n);return o.a.isBoolean(r)?r:c}t.a=function generateDragDropProps(e){var t,n=e[getQuestionKey(e)],r=n.question,l=n.value,c=e.base.cacheRenderedMath,u=function generatePossibleResponseCollection(e){var t=getQuestionKey(e),n=e[t],r=n.cachedMath,s=n.question,l=n.dynamicShuffleSeed,c={cacheRenderedMath:e.base.cacheRenderedMath,disabled:isDisabled(e),inMaskingState:!!e.base.inMaskingState,isMath:e.base.isMath,showDragHandler:shouldShowDragHandler(e)};return s.group_possible_responses?o.a.chain(s.possible_response_groups).map((function(e,t){var n=e.responses,r=void 0===n?[]:n;return Object(a.a)(r,s,l).map((function(e){return o()({groupIndex:t,defaultValue:e,plainText:e}).assign(c)}))})).flatten().map((function(t,n){var a=getResponseHtml(r,n)||t.plainText;return o()({}).assign(t,{value:a,index:n,spokenMath:getSpokenMath(r,n),key:generateResponseKey(e,n)})})).value():Object(a.a)(s.possible_responses,s,l).map((function(t,n){return o()({index:n,defaultValue:t,key:generateResponseKey(e,n),plainText:t,spokenMath:getSpokenMath(r,n),value:getResponseHtml(r,n)||t}).assign(c)}))}(e),f=o.a.isBoolean(r.duplicate_responses)?r.duplicate_responses:s,p=(t=o.a.deepClone(l)||[],u.filter((function(e){var n=t.indexOf(e.plainText);if(n>=0)return f||t.splice(n,1),!0})).map(o.a.clone)),d={cacheRenderedMath:c,possibleResponseCollection:u,canDuplicateResponses:f,selectedResponses:p,disabled:isDisabled(e),possibilityListPosition:generatePossibilityListPosition(e)};return r.group_possible_responses&&(d.possibleResponseGroups=o()(r.possible_response_groups).pluck("title")),d}},292:function(e,t,n){"use strict";var r=n(5),o=n.n(r),a=n(0),s=n.n(a),l=n(1),c=n.n(l),u=n(19),f=n(38),p=n(39),d=n(580),h=n.n(d),y=n(165),v=h.a;t.a=o.a.View.extend({initialize:function initialize(){var e=this;o.a.View.prototype.initialize.apply(this,arguments),this.remove=s.a.wrap(this.remove,(function(t){e._removed||(t.call(e),e._removed=!0)}))},getFacade:function getFacade(){var e=this;if(s.a.isUndefined(this.featureFacade)){var t={};t.on=o.a.Events.on,t.off=function(e,t){if(!s.a.isString(e)||!s.a.isFunction(t))throw new Error("off method only supported with event and callback parameters");o.a.Events.off.apply(this,arguments)},t.trigger=o.a.Events.trigger,t.once=o.a.Events.once,t.begin=s.a.bind(this.begin,this),t.pause=s.a.bind(this.pause,this),t.stop=s.a.bind(this.stop,this),t.toggle=s.a.bind(this.toggle,this),t.startMirror=s.a.bind(this.startMirror,this),t.stopMirror=s.a.bind(this.stopMirror,this),t.disable=this.setDisabled.bind(this,!0),t.enable=this.setDisabled.bind(this,!1),t.destroy=this.destroy.bind(this),t.isRendered=function(){return!0},t.render=function(){return!1},this.featureFacade=t,this.imageLoader&&this.imageLoader.addFacadeMethods(this.featureFacade),this.simpleFeatureFacades=this.simpleFeatureFacades||{},this.featureFacade.simpleFeatures=function(){return s.a.clone(e.simpleFeatureFacades)},this.featureFacade.simpleFeature=function(t){return e.simpleFeatureFacades[t]},this.addFacadeMethods(this.featureFacade)}return this.featureFacade},addFacadeMethods:function addFacadeMethods(e){},begin:function begin(){this.getFacade().trigger("complete")},pause:function pause(){},stop:function stop(){},toggle:function toggle(){},startMirror:function startMirror(){this.visibilityChangeObserver&&this.visibilityChangeObserver.start()},stopMirror:function stopMirror(){this.visibilityChangeObserver&&this.visibilityChangeObserver.stop()},setDisabled:function setDisabled(e){e?this.undelegateEvents():this.delegateEvents()},destroy:function destroy(){this.remove(),this.model.destroy();var e=this.featureFacade;s.a.each(e,(function(t,n){delete e[n]}))},initialisationCompleted:function initialisationCompleted(){var e=this.options.activity,t=e&&e.hooks;s.a.isFunction(this.applyComputedVisibility)&&(this.visibilityChangeObserver=new y.a(this.$el[0],this.applyComputedVisibility.bind(this)),s.a.getNested(e,"attributes.mirror_visibility")&&this.visibilityChangeObserver.start()),t&&t.reset.push(this.reset.bind(this)),this.options.initialisationCallback&&s.a.defer(this.options.initialisationCallback)},mathquillRendering:function mathquillRendering(){return this.model.activity&&this.model.activity.get("math_renderer")?"mathquill"===this.model.activity.get("math_renderer"):this.model.get("math_renderer")&&"mathquill"===this.model.get("math_renderer")},renderMathquill:function renderMathquill(){this.mathquillRenderer||(this.mathquillRenderer=new u.a),this.mathquillRenderer.render(this.$el[0])},renderSimpleFeatures:function renderSimpleFeatures(e){return f.a.renderSimpleFeatures.call(this,this.$el,this.model.activity,e)},renderViewContent:function renderViewContent(e,t){var n=s.a.isString(e);(t=t||[]).unshift(this.model.getFontClass());var r=c()(v({htmlId:this.model.get("feature_id"),featureType:this.model.get("type"),extraClasses:t.join(" "),featureContent:n?e:""}));n||r.append(e);var o=this.$el;this.imageLoader=new p.a({element:r[0]}),this.imageLoader.loadImages(),this.setElement(r),o.replaceWith(r),!n&&this.onAttach&&this.onAttach();var a=this.model.get("feature_id")||this.model.get("simplefeature_id");r.attr("data-lrn-widget-container",a).attr("data-lrn-widget-type","feature")},reset:function reset(){this.visibilityChangeObserver&&this.visibilityChangeObserver.stop();var e=this.getFacade();e.trigger&&e.trigger("reset")}})},304:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(248);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function generateResponseInputMountedHandler(e){if(o.a.isFunction(e.onInputsMounted)){var t=e.responseContainers.length,n=0;return function(){++n===t&&e.onInputsMounted()}}return o.a.noop}t.a=function ResponseArea(e){var t,n,r,a,c=o.a.conditionallyBuildString({lrn_display_correct_answer_enabled:e.isShowingCorrectAnswers||e.hasResponseDistractorRationale}," ");return(s.a.createElement(l.a,{className:c,html:e.template,Input:e.Input,inputs:(t=e,n=generateResponseInputMountedHandler(t),r=t.actions,a=t.i18nLabels,t.responseContainers.map((function(e,t){return function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({actions:r,i18nLabels:a,index:t,onMounted:n},e)})))}))}},305:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),s=n.n(a),l=n(178),c=n(221),u=n(135);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=l.a.SuggestedAnswersList,p=(l.a.CheckAnswerButton,l.a.ValidatableQuestionWithOptionalResponseInput);t.a=function Layout(e){var t=e.validatable,n=t.validationState,r=t.canShowGlobalValidationUI,a=e.base.i18n.labels.ariaLiveText,l=o.a.conditionallyBuildString(_defineProperty({lrn_response_innerbody:!0,"lrn-response-validate-wrapper":!0,lrn_correct:r&&n&&"correct"===n,lrn_incorrect:r&&n&&"incorrect"===n},e.innerBodyClassName,!o.a.isEmpty(e.innerBodyClassName))," "),d=o.a.conditionallyBuildString(_defineProperty({lrn_response_math:e.base.isMath},e.wrapperClassName,!o.a.isEmpty(e.wrapperClassName))," ");return s.a.createElement(p,{validatable:e.validatable},s.a.createElement("div",{className:"lrn_cloze_response_container"},s.a.createElement("div",{className:l},s.a.createElement("div",{className:d},e.children))),s.a.createElement(c.a.Label,null,function generateAccessibilityLabel(e,t){var n=e.validationState,r=u.a.getGlobalAccessibility(n,t);return r.visible?r.label:""}(e.validatable,a)),s.a.createElement(f,null))}},306:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(135),s=n(138),l=n(278),c=n(214),u=n(204),f=n(18),p=n.n(f),d={clozeAssociation:{dragDrop:{},responseContainers:{height:null,isAutoSized:!0,isReadOnly:!1,role:null,validation:{ariaLabel:null,isAriaLabelVisible:!1,isCorrect:null,isNumerationVisible:!1,isVisible:!1,numeration:null},value:null,width:null,wordWrap:!1}},clozeDropdown:{responseContainers:{height:null,isReadOnly:!1,placeholder:null,possibilities:[],validation:{ariaLabel:null,isAriaLabelVisible:!1,isCorrect:null,isNumerationVisible:!1,isVisible:!1,numeration:null},value:null,width:null}},clozeText:{responseContainers:{cols:null,customCharacterMapCharacters:null,hasCharacterMap:!1,height:null,isMultipleLine:!1,isReadOnly:null,maxLength:15,maxWidth:null,placeholder:null,type:"text",validation:{ariaLabel:null,isAriaLabelVisible:!1,isCorrect:null,isNumerationVisible:!1,isVisible:!1,numeration:null},value:null,width:null}}},h={clozeassociation:"clozeAssociation",clozedropdown:"clozeDropdown",clozetext:"clozeText"},y={clozeAssociation:function clozeAssociation(e){var t,n=e.question,r=e.defaults,a=n.template,s=void 0===a?"":a,l=normalizePropNames(n.response_container||{});return t=n.group_possible_responses?o.a.chain(n.possible_response_groups).pluck("responses").flatten().value():n.possible_responses||[],l.totalPossibilities=t.length,l.totalResponseAreas=(s.match(/{{response}}/g)||[]).length,o()({}).assign(r,l)},clozeDropdown:function clozeDropdown(e){var t=e.question,n=e.defaults,r=normalizePropNames(t.response_container||{});return o()({}).assign(n,r)},clozeText:function clozeText(e){var t=e.question,n=e.defaults,r=normalizePropNames(t.response_container||{}),a=t.character_map,s=o()(a).map((function(e){return p.a.stripHTML(p.a.createImageDescriptions(e),!0)}));return o()({}).assign(n,removeNonExistantProps({customCharacterMapCharacters:o.a.isArray(a)?s:null,hasCharacterMap:!!a,isMultipleLine:t.multiple_line,maxLength:t.max_length,spellCheck:Object(u.d)(t.spellcheck),autoCapitalize:Object(u.a)(t.spellcheck),autoComplete:Object(u.b)(t.spellcheck),autoCorrect:Object(u.c)(t.spellcheck)}),r)}},v={clozeAssociation:function clozeAssociation(e){var t=e.hasActiveResponse,n=d.clozeAssociation.responseContainers;return o()({}).assign(n,{role:t?"button":"region"})},clozeDropdown:function clozeDropdown(){return o()(d.clozeDropdown.responseContainers).clone()},clozeText:function clozeText(e){var t=3,n=1.7,r=.6,a=e.question,s=d.clozeText.responseContainers,l=a.max_length||s.maxLength,c=l<50?l:50,u=c*r+n+"em",f=c+t;return o()({}).assign(s,{cols:f,width:u,maxWidth:u})}},m={clozeAssociation:function clozeAssociation(e){return normalizeResponseContainers(e.question.response_containers)},clozeDropdown:function clozeDropdown(e){var t=e.question,n=e.dynamicShuffleSeed,r=t.response_containers,a=t.possible_responses||[],s=normalizeResponseContainers(r);return a.map((function(e,r){var a=s[r]||{},l=Object(c.a)(e,t,n+r);return o()({}).assign(a,{possibilities:l})}))},clozeText:function clozeText(e){return normalizeResponseContainers(e.question.response_containers)}};function addRelatedResponseContainerProp(e,t,n){var r=o.a.clone(e);return"width"===n&&(r.maxWidth=t),r[n]=t,r}function generateResponseContainerProps(e,t){var n=t.validatable,r=void 0===n?[]:n,l=!!r.responseLevelDistractorRationale&&"always"===r.showDistractorRationale.perResponse,c=function generateResponseContainerPropsBuilder(e){return function(t,n){var r=e.validatedResponses[n],l=e.responseContainers[n],c=Object(s.a)(e.numerationType,n),u=a.a.getResponseAccessibility({isCorrect:r,response:t,isMath:e.isMath,state:a.a.getResponseState(t,r),validationState:e.validationState,value:c,ariaLiveLabels:e.i18n.labels.ariaLiveText}),f=o()({}).assign(e.defaultValidation,removeNonExistantProps({isCorrect:r,numeration:c,ariaLabel:u.label,isAriaLabelVisible:e.isNumerationVisible&&u.visible,isNumerationVisible:e.isNumerationVisible,isVisible:e.isValidationVisible})),p=o()(e.containersConfig[n]||{}).assign(removeNonExistantProps(l),{validation:f,isReadOnly:e.isReadOnly,value:t});return o.a.chain({}).assign(e.common,removeNonExistantProps(p)).reduce(normalizePropValue,{}).reduce(addRelatedResponseContainerProp,{}).value()}}({common:y[e]({defaults:v[e](t),question:t.question}),containersConfig:m[e](t),defaultValidation:d[e].responseContainers.validation,isReadOnly:t.base.readOnly||t.base.disabled,isMath:t.base.isMath,i18n:t.base.i18n,isNumerationVisible:r.isShowingCorrectAnswers||l,isValidationVisible:o.a.isArray(t.validatedResponses),numerationType:r.validationStemNumeration,responseContainers:t.responseContainers,validatedResponses:normalizeValidatedResponses(t.validatedResponses,t.responses),validationState:r.validationState});return t.responses.map(c)}function normalizeMeasurement(e){return o.a.exists(e)?function getValueFromMeasurement(e){var t=Number(e.toString().replace(/[^\d.-]/g,""));return!o.a.isNaN(t)&&t>=0?t:0}(e)+function getUnitFromMeasurement(e){var t=e.toString().substr(-2);return"em"===t||"px"===t?t:"px"}(e):null}function normalizePropNames(e){return o()(e).reduce((function(e,t,n){switch(n){case"aria_label":e.ariaLabel=t;break;case"input_type":e.type=t;break;case"wordwrap":e.wordWrap=t;break;default:e[n]=t}return e}),{})}function normalizePropValue(e,t,n){var r=o.a.clone(e);return r[n]="height"===n||"width"===n?normalizeMeasurement(t):t,r}function normalizeResponseContainers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return normalizePropNames(e)}))}function normalizeValidatedResponses(e,t){return o.a.isArray(e)?e.map((function(e,n){return!e&&o.a.isNull(t[n])?t[n]:e})):t.map((function(){return null}))}function removeNonExistantProps(e){return o()(e).reduce((function(e,t,n){return o.a.exists(t)&&(e[n]=t),e}),{})}t.a=function generateProperties(e){var t=function getSubtype(e){return h[e.cloze.question.type]}(e);if(!o.a.exists(t)){var n=o()(h).keys().join(", ");throw new Error("Unsupported cloze type - can only be: ".concat(n))}var r=e.validatable,a=r.responseLevelDistractorRationale,s=r.showDistractorRationale,c=r.isShowingCorrectAnswers,u=r.validatedResponses,f={hasResponseDistractorRationale:!!a&&"always"===s.perResponse,i18nLabels:o.a.deepClone(e.base.i18n.labels),inMaskingState:!!e.base.inMaskingState,isShowingCorrectAnswers:c,responseContainers:generateResponseContainerProps(t,{base:e.base,dynamicShuffleSeed:e.cloze.dynamicShuffleSeed,hasActiveResponse:e.cloze.hasActiveResponse,question:e.cloze.question,responseContainers:e.cloze.responseContainers,responses:e.cloze.value,validatable:e.validatable,validatedResponses:u}),template:e.cloze.question.template};return function isDragDrop(e){return o.a.isObject(d[e].dragDrop)}(t)&&(f.dragDrop=Object(l.a)(e),f.responseContainers=function addDragDropResponsesToContainers(e){return e.responseContainers.map((function(t){var n=e.dragDrop.selectedResponses,r=t.value,a=o()(t).deepClone();if(o.a.isNull(r))return a;var s=o()(n).find((function(e){return e.plainText===r}));return o()(a).assign({value:s})}))}(f)),function hasAutoSizeableContainers(e){return o()(d[e].responseContainers).has("isAutoSized")}(t)&&(f.responseContainers=function addAutoSizeablePropToContainers(e){return e.responseContainers.map((function(e){var t=!o.a.exists(e.width);return o.a.chain(e).deepClone().assign({isAutoSized:t}).value()}))}(f)),f}},307:function(e,t,n){"use strict";var r,o=n(0),a=n.n(o),s=n(263),l=n(21),c=n(25),u=n(214),f=n(135);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=s.a.actionTypes,d=(_defineProperty(r={},p.CLOZE_SET_ARIA_LIVE_TEXT,(function(e,t){return setStateProperty(e,"ariaLiveText",t.ariaLiveText)})),_defineProperty(r,p.CLOZE_SET_DRAG_DROP_RESPONSE,(function(e,t){var n=t.containerIndex,r=t.responseIndex,o=t.sourceIndex,s=function getDragDropValueFromIndex(e,t){var n=e.question,r=e.dynamicShuffleSeed;if(a.a.isArray(n.possible_response_groups)){return a.a.chain(n.possible_response_groups).pluck("responses").map((function(e){return Object(u.a)(e,n,r)})).flatten().value()[t]}var o=n.possible_responses;return Object(u.a)(o,n,r)[t]}(e,r),l=e.value.map((function(e,t){return t===n?s:t===o?null:e}));return setStateProperty(e,"value",l)})),_defineProperty(r,p.CLOZE_SET_HAS_ACTIVE_RESPONSE,(function(e,t){return setStateProperty(e,"hasActiveResponse",t.hasActiveResponse)})),_defineProperty(r,p.CLOZE_SET_RESPONSE,(function(e,t){var n=t.index,r=t.value,o=e.value.map((function(e,t){return t===n?r:e}));return setStateProperty(e,"value",o)})),_defineProperty(r,p.CLOZE_SET_RESPONSE_CONTAINER_WIDTH,(function(e,t){var n=t.indexes,r=t.width,o=e.responseContainers.map((function(e,t){return a()(n).contains(t)?a()({}).assign(e,{width:r}):a()(e).clone()}));return setStateProperty(e,"responseContainers",o)})),_defineProperty(r,p.CLOZE_SET_RESPONSE_CHARACTER,(function(e,t){var n=t.index,r=t.character,o=t.options,s=void 0===o?{}:o,l=e.responseContainers[n].selection,c=l.start,u=l.end,f=e.value.map((function(e,t){return t===n?a()(e||"").insertCharacters(r,c,u):e})),p=e.responseContainers.map((function(e,n){if(t.index===n){var r=!!s.shouldKeepFocus,o={end:e.selection.start+1,start:e.selection.start+1};return a()({}).assign(e,{isFocused:r,selection:o})}return e})),d=setStateProperty(e,"responseContainers",p);return setStateProperty(d,"value",f)})),_defineProperty(r,p.CLOZE_SET_RESPONSE_CONTAINER_FOCUS,(function(e,t){var n=e.responseContainers.map((function(e,n){var r=t.index===n&&t.isFocused;return a()({}).assign(e,{isFocused:r})}));return setStateProperty(e,"responseContainers",n)})),_defineProperty(r,p.CLOZE_SET_RESPONSE_CONTAINER_SELECTION,(function(e,t){var n=e.responseContainers.map((function(e,n){var r=t.index===n?t.selection:e.selection;return a()({}).assign(e,{selection:r})}));return setStateProperty(e,"responseContainers",n)})),_defineProperty(r,l.a.actionTypes.QUESTION_CACHE_RENDERED_MATH,(function(e,t){var n=t.mathInResponse,r=n.latex,o=a()(e.cachedMath).clone(),s=a()({}).assign(n,{spokenMath:f.a.getText(r,!0,e.disableSpokenmathDistractors)});return o.push(s),setStateProperty(e,"cachedMath",o)})),r);function setStateProperty(e,t,n){return a.a.extend({},e,_defineProperty({},t,n))}t.a=Object(c.a)(d,{})},308:function(e,t,n){"use strict";n(0);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function InputHelper(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,InputHelper),this.editableElement=e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(InputHelper,[{key:"saveCurrentPosition",value:function saveCurrentPosition(e){(e.selectionStart||"0"===e.selectionStart)&&(this.startPos=e.selectionStart,this.endPos=e.selectionEnd)}},{key:"restoreCurrentPosition",value:function restoreCurrentPosition(e){e.focus(),e.setSelectionRange(this.startPos,this.endPos),this.startPos=0,this.endPos=0}},{key:"insertText",value:function insertText(e,t){var n=this.editableElement.selectionStart,r=this.editableElement.selectionEnd;e.focus(),e.value=e.value.substring(0,n)+t+e.value.substring(r,e.value.length),"number"!==e.type&&e.setSelectionRange(n+1,n+1)}},{key:"numberInputFilter",value:function numberInputFilter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=/[^\-+0-9eE\.\/]/g,r=e.replace(n,"");return r.length>t&&(r=r.substring(0,t)),r}}]),InputHelper}();t.a=r},319:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(129),s=n.n(a),l=n(127),c=n.n(l),u=n(132),f=n.n(u),p=n(193);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=function(t){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FloatingElement,t);var n=_createSuper(FloatingElement);function FloatingElement(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FloatingElement),_defineProperty(_assertThisInitialized(t=n.call(this,e)),"CONTAINER_CLASSNAMES","lrn lrn_float_element_container"),_defineProperty(_assertThisInitialized(t),"ELEMENT_CLASSNAMES","lrn-float-element"),t.node=document.createElement("div"),t.node.className=t.CONTAINER_CLASSNAMES,t.parentNode=null,t}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(FloatingElement,[{key:"render",value:function render(){var t=this.props,n=t.floatElementClasses,r=t.floatElementId,a=t.position,l=t.visible,u=s()(this.ELEMENT_CLASSNAMES,n),p={top:"".concat(a.y,"px"),left:"".concat(a.x,"px"),display:l?"block":"none"},d=o.a.omit(this.props,["floatElementClasses","floatElementId"]);return f.a.createPortal(c.a.createElement("div",{className:u,"data-lrn-float":r,style:p},c.a.createElement(e,d)),this.node)}},{key:"componentDidMount",value:function componentDidMount(){this.appendDOMNodeTo(this.props.parentNode)}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){this.appendDOMNodeTo(e.parentNode)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.removeDOMNode()}},{key:"appendDOMNodeTo",value:function appendDOMNodeTo(e){if((e=e||document.body)!==this.parentNode){this.parentNode=e,e.appendChild(this.node);var t=this.props.onParentNodeChange;o.a.isFunction(t)&&t(this.parentNode)}}},{key:"removeDOMNode",value:function removeDOMNode(){this.node.parentNode&&(this.node.parentNode.removeChild(this.node),this.parentNode=null)}}]),FloatingElement}(c.a.Component);return Object(p.a)(t,"parentNode")}},370:function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=toObject(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))o.call(n,u)&&(l[u]=n[u]);if(r){s=r(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(l[s[f]]=n[s[f]])}}return l}},400:function(e,t){var n,r,o=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var a,s=[],l=!1,c=-1;function cleanUpNextTick(){l&&a&&(l=!1,a.length?s=a.concat(s):c=-1,s.length&&drainQueue())}function drainQueue(){if(!l){var e=runTimeout(cleanUpNextTick);l=!0;for(var t=s.length;t;){for(a=s,s=[];++c<t;)a&&a[c].run();c=-1,t=s.length}a=null,l=!1,function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new Item(e,t)),1!==s.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},412:function(e,t){function E(){}E.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function listener(){r.off(e,listener),t.apply(n,arguments)}return listener._=t,this.on(e,listener,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var a=0,s=r.length;a<s;a++)r[a].fn!==t&&r[a].fn._!==t&&o.push(r[a]);return o.length?n[e]=o:delete n[e],this}},e.exports=E},419:function(e,t,n){"use strict";var r={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},o={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\\\newline{}","\n":"\\\\newline{}"},a=function defaultEscapeMapFn(e,t){return Object.assign({},e,t)};e.exports=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preserveFormatting,s=void 0!==n&&n,l=t.escapeMapFn,c=void 0===l?a:l,u=String(e),f="",p=c(Object.assign({},r),s?Object.assign({},o):{}),d=Object.keys(p),h=function _loop(){var e=!1;d.forEach((function(t,n){e||u.startsWith(t)&&(f+=p[d[n]],u=u.slice(t.length,u.length),e=!0)})),e||(f+=u.slice(0,1),u=u.slice(1,u.length))};u;)h();return f}},445:function(e,t){e.exports=function naturalSort(e,t){"use strict";var n,r,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,i=function(e){return naturalSort.insensitive&&(""+e).toLowerCase()||""+e},u=i(e).replace(a,"")||"",f=i(t).replace(a,"")||"",p=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(u.match(l),16)||1!==p.length&&u.match(s)&&Date.parse(u),y=parseInt(f.match(l),16)||h&&f.match(s)&&Date.parse(f)||null;if(y){if(h<y)return-1;if(h>y)return 1}for(var v=0,m=Math.max(p.length,d.length);v<m;v++){if(n=!(p[v]||"").match(c)&&parseFloat(p[v])||p[v]||0,r=!(d[v]||"").match(c)&&parseFloat(d[v])||d[v]||0,isNaN(n)!==isNaN(r))return isNaN(n)?1:-1;if(typeof n!=typeof r&&(n+="",r+=""),n<r)return-1;if(n>r)return 1}return 0}},461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createChangeEmitter=function createChangeEmitter(){var e=[],t=e;function ensureCanMutateNextListeners(){t===e&&(t=e.slice())}return{listen:function listen(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var n=!0;return ensureCanMutateNextListeners(),t.push(e),function(){if(n){n=!1,ensureCanMutateNextListeners();var r=t.indexOf(e);t.splice(r,1)}}},emit:function emit(){for(var n=e=t,r=0;r<n.length;r++)n[r].apply(n,arguments)}}}},462:function(e,t,n){"use strict";(function(e,r){var o,a=n(464);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=Object(a.a)(o);t.a=s}).call(this,n(37),n(463)(e))},463:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},464:function(e,t,n){"use strict";function symbolObservablePonyfill(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return symbolObservablePonyfill}))}}]);